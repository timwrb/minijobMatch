import{O as se,r as Te,d as L,o as N,l as je,p as J,F as le,N as Ne,j as E,P as G,Q as te,R as P,S as ae,T as Fe,U as Qe,V as xe,f as Ae,c as et,n as Le,H as tt,t as nt,k as Pe}from"./index-DmYaZOZj.js";var rt=!1,at=!0;/*!
 * helper-js v3.1.6
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function pe(e){return Object.prototype.toString.call(e)==="[object Array]"}function Ie(e){return Object.prototype.toString.call(e)==="[object Object]"}function lt(e){return typeof e=="function"}function st(e,t){return e<t?e:t}function Xe(e,t){let n,a=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),a++;return a}function Ye(e){return e[e.length-1]}function it(e){return pe(e)?e:[e]}function ot(e,t){let n=new Set(t);const a={};return n.forEach(c=>{a[c]=e[c]}),a}function dt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){if(t.reverse)if(e.length!=null)for(let n=e.length-1;n>=0;n--){const a={value:e[n],index:n};(!t.exclude||!t.exclude(a))&&(yield a)}else if(Ie(e)){const n=Object.keys(e);n.reverse();for(const a of n){const c={value:e[a],key:a};(!t.exclude||!t.exclude(c))&&(yield c)}}else throw"Unsupported type";else if(e.length!=null)for(let n=0;n<e.length;n++){const a={value:e[n],index:n};(!t.exclude||!t.exclude(a))&&(yield a)}else if(Ie(e))for(const n of Object.keys(e)){const a={value:e[n],key:n};(!t.exclude||!t.exclude(a))&&(yield a)}else throw"Unsupported type"}()}function ct(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}function qe(e,t){return Object.keys(t).forEach(n=>{ct(e,n,t[n])}),e}function ut(e){const t={};return Object.keys(e).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function V(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=qe({...n},{childrenKey:"children"});const{childrenKey:a}=n,c=pe(e)?e:[e];class r{}const l=(s,h,i)=>{n.reverse&&(s=s.slice(),s.reverse());const o=s.length;for(let u=0;u<o;u++){const d=s[u],f=n.reverse?o-u-1:u,v=i?[...i,f]:[];n.childFirst&&d[a]!=null&&l(d[a],d,v);const y=t(d,f,h,v);if(y===!1)throw new r;if(y==="skip children")continue;if(y==="skip siblings")break;n.childFirst||d[a]!=null&&l(d[a],d,v)}};try{l(c,null,pe(e)?[]:null)}catch(s){if(!(s instanceof r))throw s}}function ht(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a;return V(e,function(){if(t(...arguments))return a={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1},n),a}function ft(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ht(e,t,n)?.node}function Ze(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:a,nodeHandler:c}=n,r=new Be;return r.childrenKey=a,V(e,(l,s,h,i)=>{let o=Object.assign({},l);o[a]&&(o[a]=[]),c&&(o=c(o,{oldNode:l,index:s,parent:h,path:i})),r.set(i,o)},{childrenKey:a}),r.data}class Be{data;childrenKey="children";constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.data=t}get rootChildren(){const{childrenKey:t}=this,{data:n}=this;return pe(n)?n:n[t]}iteratePath(t){var n=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{childrenKey:c,rootChildren:r}=n;if(a.reverse){const l=[...n.iteratePath(t,{...a,reverse:!1})];l.reverse();for(const{path:s,node:h}of l)yield{path:s,node:h}}else{let l=[],s=r;for(const h of t){const i=[...l,h],o=s[h];yield{path:i,node:o},l=i,s=o[c]}}}()}getFamily(t){const n=[];for(const{node:a}of this.iteratePath(t))n.push(a);return n}get(t){return Ye(this.getFamily(t))}getParentAndIndex(t){const n=t.slice(),a=n.pop();return{parent:this.get(n),index:a,parentPath:n}}getParent(t){return this.getParentAndIndex(t).parent}set(t,n){if(t==null||t.length===0)this.data=n;else{const{childrenKey:a}=this;let{rootChildren:c}=this;const{parent:r,index:l}=this.getParentAndIndex(t);let s;t.length===1?(c||(this.data?this.data[a]=[]:this.data=[]),s=c):(r[a]||(r[a]=[]),s=r[a]),s[l]=n}}delete(t){const{childrenKey:n,rootChildren:a}=this,{parent:c,index:r}=this.getParentAndIndex(t),l=t.length===1?a:c[n],s=l[r];return l.splice(r,1),s}walk(t,n){const{childrenKey:a,data:c}=this;return V(c,t,a,n)}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ze(this.data),ut({childrenKey:this.childrenKey,nodeHandler:t.nodeHandler||void 0})}}function He(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return lt(e)?e(...t):e}function gt(e,t){return function(){let a,c;try{a=e(...arguments)}catch(r){c=r}finally{}if(c)throw c;return a}}function ne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];let a;const c={};let r=c;return{action:function(){for(var h=arguments.length,i=new Array(h),o=0;o<h;o++)i[o]=arguments[o];if(i.length===0)return r===c&&(r=e()),r;if(a||(a=new yt),!a.has(i)&&(a.set(i,e(...i)),t.capacity!=null)){n.push(i);const u=n.splice(0,n.length-t.capacity);for(const d of u)a.delete(d)}return a.get(i)},clearCache:()=>{a=null,n.splice(0,n.length)}}}function pt(){let e,t;return{promise:new Promise((a,c)=>{e=a,t=c}),resolve:e,reject:t}}function vt(e,t){for(;;){if(e.parentNode==null)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}function Se(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const n=t.top-document.documentElement.clientTop,a=t.bottom,c=t.left-document.documentElement.clientLeft,r=t.right,l=t.width||r-c,s=t.height||a-n,o={top:n,right:r,bottom:a,left:c,width:l,height:s,x:c,y:n};t={...o,toJSON:()=>o}}return t}function Ve(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n&&n.withSelf?e:e.parentElement;for(;a;){const c=n.until&&a===n.until;if(c&&!n.withUntil)return;const r=t(a);if(r==="break")return;if(r)return a;if(c)return;a=a.parentElement}}function ve(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function Ue(e,t){for(const n of t)if(ve(e,n))return!0;return!1}function U(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent(`on${t}`,n,a)}function R(e,t,n,a){e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent&&e.detachEvent(`on${t}`,n,a)}function mt(e){let t=[];const n=()=>{if(!c.listening){for(const r of e){U.apply(this,r);const l=()=>R.apply(this,r);t.push(l)}c.listening=!0}},c={listening:!1,stop:()=>{if(c.listening){for(const r of t)r();t=[],c.listening=!1}},resume:n,start:n};return c.start(),c}function me(e,t){return getComputedStyle(e)[t]}function $e(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:a,end:c}=n;const{returnNearestIfNoHit:r,maxTimes:l}=n;let s,h;a==null&&(a=0,c=e.length-1);let i=0,o;for(;a>=0&&a<=c;){if(i>=l)throw Error(`binarySearch: loop times is over ${l}, you can increase the limit.`);s=Math.floor((c-a)/2+a),h=e[s];const u=i+1;if(o=t(h,s,u),o>0)c=s-1;else if(o<0)a=s+1;else return{index:s,value:h,count:u,hit:!0};i++}return r?{index:s,value:h,count:i+1,hit:!1,greater:o>0}:null}class yt{_map=new Map;_values={};_objCount=0;_keysToString(t){const{_map:n}=this;let a=[];for(const c of t){if(!n.has(c))return null;a.push(n.get(c)[0])}return a.toString()}has(t){return this._keysToString(t)!=null}get(t){const{_values:n}=this,a=this._keysToString(t);if(a==null)throw"Value not found by specified keys";return n[a][1]}set(t,n){const{_map:a,_values:c}=this;let r=[];for(const l of t){let s,h=1;a.has(l)?([s,h]=a.get(l),h++):(this._objCount++,s=this._objCount.toString()),a.set(l,[s,h]),r.push(s)}c[r.toString()]=[t.slice(),n]}delete(t){const{_values:n,_map:a}=this,c=this._keysToString(t);if(c==null)throw"Value not found by specified keys";delete n[c];for(const r of t){let[l,s]=a.get(r);s--,s===0?a.delete(r):a.set(r,[l,s])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:t}=this;for(const n in t){const[a,c]=t[n];yield[a,c]}}count(){return[...this.entries()].length}}/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 */const bt=se({props:{table:Boolean}}),Je=(e,t)=>{const n=e.__vccOpts||e;for(const[a,c]of t)n[a]=c;return n},Dt={key:0},xt={key:1};function St(e,t,n,a,c,r){return e.table?(N(),L("table",Dt,[E(e.$slots,"prepend"),Ae("tbody",null,[E(e.$slots,"default")]),E(e.$slots,"append")])):(N(),L("div",xt,[E(e.$slots,"prepend"),E(e.$slots,"default"),E(e.$slots,"append")]))}const kt=Je(bt,[["render",St]]),Ct=se({components:{VirtualListTable:kt},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=te(0),n=te(e.firstRender-1),a=P(()=>{var D;return st(n.value,(((D=e.items)==null?void 0:D.length)||1)-1)}),c=te(0),r=P(()=>d.value[t.value]?ee(t.value):0),l=P(()=>d.value.length>0?ee(d.value.length-1)+Ye(u.value):0),s=P(()=>d.value[a.value]?l.value-ee(a.value)-u.value[a.value]:0),h=P(()=>e.disabled?{}:{overflow:"auto"}),i=P(()=>{const D={display:"flex"};return e.disabled||(e.horizontal?Object.assign(D,{"margin-left":r.value+"px","margin-right":s.value+"px",width:l.value-s.value-r.value+"px"}):Object.assign(D,{"margin-top":r.value+"px","margin-bottom":s.value+"px"})),D["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete D.display,delete D["flex-direction"]),D}),o=P(()=>ae((e.items||[]).map(()=>null))),u=P(()=>(e.items||[]).map((D,m)=>{var p;if(o[m]!=null)return o[m];let w=(p=e.itemSize)==null?void 0:p.call(e,D,m);return w==null&&(w=c.value),w})),d=P(()=>{const D=[];return u.value.reduce((m,p)=>(D.push(m),m+p),0),D});Fe(()=>e.items,C);const f=P(()=>{if(!e.items||e.disabled)return;const D=[];for(let m=t.value;m<=a.value;m++){const p=e.items[m];if(!p)break;D.push({item:p,index:m})}return D}),v=te(),y=te();Qe(async()=>{C();try{De()}catch{await xe(),C()}});let x;function _(){const D=v.value;if(!D)return;const m=j(D);x!=null&&e.buffer-Math.abs(m-x)>=10||(x=m,C())}let O=!1,M=!1;async function C(){var D;if(O){M=!0;return}if(!e.items||e.disabled)return;O=!0;const m=v.value,p=(D=y.value)==null?void 0:D.$el;if(!m||!p)return;c.value||(c.value=ce()),t.value=oe(),n.value=de(),await xe();let w,I=0;const $={},X=e.table?p.querySelector("tbody").children:p.children;for(let S=0;S<X.length;S++){const k=X[S],T=me(k,"position");if(T&&["absolute","fixed"].includes(T))continue;const z=me(k,"display")!=="none"?Q(k):0,Y=k.getAttribute("vt-index"),ue=Y?parseInt(Y):t.value+I;$[ue]=($[ue]||0)+z,I++}for(const S of Object.keys($)){const k=parseInt(S);o.value[k]!==$[k]&&(o.value[k]=$[k],w=!0)}w&&await xe(),O=!1,M&&(M=!1,C());function oe(){const S=j(m)-B(m)-e.buffer;return $e(d.value,k=>k-S,{returnNearestIfNoHit:!0}).index}function de(){const S=j(m)-B(m)+H(m)+e.buffer;return $e(d.value,k=>k-S,{returnNearestIfNoHit:!0}).index}function ce(){const S=[],k=e.table?p.querySelector("tbody").children:p.children;for(let T=0;T<k.length;T++){const z=k[T],Y=getComputedStyle(z);if(["absolute","fixed"].includes(Y.position))continue;const ue=Q(z);if(S.push(ue),S.length>=10)break}return S.length===0?0:S.reduce((T,z)=>T+z,0)/S.length}}function H(D){const m=getComputedStyle(D);let p=parseFloat(e.horizontal?m.width:m.height);return m.boxSizing==="border-box"&&(e.horizontal?p=p-parseFloat(m.borderLeftWidth)-parseFloat(m.borderRightWidth):p=p-parseFloat(m.borderTopWidth)-parseFloat(m.borderBottomWidth)),p}function Q(D){let m=H(D);const p=getComputedStyle(D);return e.horizontal?m+=parseFloat(p.borderLeftWidth)+parseFloat(p.borderRightWidth)+parseFloat(p.marginLeft)+parseFloat(p.marginRight):m+=parseFloat(p.borderTopWidth)+parseFloat(p.borderBottomWidth)+parseFloat(p.marginTop)+parseFloat(p.marginBottom),m=Number.isNaN(m)?0:m,m}function j(D){return e.horizontal?D.scrollLeft:D.scrollTop}function B(D){const m=getComputedStyle(D);return e.horizontal?parseFloat(m.paddingLeft):parseFloat(m.paddingTop)}function ee(D){return d.value[D]}function De(){const D=v.value;new ResizeObserver(m=>{for(let p of m)if(ve(p.target,"vtlist")){C();break}}).observe(D)}function ie(D,m){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return m;if(typeof e.itemKey=="function")return e.itemKey(D,m)}}return{listElRef:v,listInnerRef:y,onscroll:_,listStyle:h,listInnerStyle:i,visibleItemsInfo:f,getItemKey:ie,update:C,sizes:u,positions:d,runtimeSizes:o}}});function _t(e,t,n,a,c,r){const l=Te("VirtualListTable");return N(),L("div",{class:"vtlist",ref:"listElRef",style:G(e.listStyle),onScrollPassive:t[0]||(t[0]=(...s)=>e.onscroll&&e.onscroll(...s))},[je(l,{class:"vtlist-inner",ref:"listInnerRef",style:G(e.listInnerStyle),table:e.table},{prepend:J(()=>[E(e.$slots,"prepend")]),append:J(()=>[E(e.$slots,"append")]),default:J(()=>[e.disabled?(N(!0),L(le,{key:0},Ne(e.items,(s,h)=>E(e.$slots,"default",{key:e.getItemKey(s,h),item:s,index:h})),128)):(N(!0),L(le,{key:1},Ne(e.visibleItemsInfo,({item:s,index:h})=>E(e.$slots,"default",{key:e.getItemKey(s,h),item:s,index:h})),128))]),_:3},8,["style","table"])],36)}const wt=Je(Ct,[["render",_t]]);/*!
 * @he-tree/tree-utils v0.1.0-alpha.5
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Z="children";function Et(e){const n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a={...Ot,...n,data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:r,childrenKey:l}=this,s=new Be([]);this._statsMap=new Map,V(r,(i,o,u,d)=>{const f=this.statHandler({...Re(),data:i,open:!!this.defaultOpen,parent:s.getParent(d),children:[],level:d.length});this._statsMap.set(i,f),s.set(d,f)},{childrenKey:l});const h=[];s.walk(i=>{h.push(i)}),this.stats=this.statsHandler(s.rootChildren),this.statsFlat=this.statsFlatHandler(h),this.initialized=!0},getStat(r){let l=this._statsMap.get(r);if(!l)throw new Me("Stat not found");return l},has(r){if(r.isStat)return this.statsFlat.indexOf(r)>-1;try{return!!this.getStat(r)}catch(l){if(l instanceof Me)return!1;throw l}},_getPathByStat(r){if(r==null)return[];const s=this.getSiblings(r).indexOf(r);return[...r.parent?this._getPathByStat(r.parent):[],s]},afterOneCheckChanged(r){const{checked:l}=r;if(r._ignoreCheckedOnce)return delete r._ignoreCheckedOnce,!1;const s=h=>{const{parent:i}=h;if(i){let o,u,d;for(const v of i.children)v.checked?o=!0:v.checked===0?d=!0:u=!0;const f=d?0:u?o?0:!1:!0;i.checked!==f&&(this._ignoreCheckedOnce(i),i.checked=f),s(i)}};return s(r),V(r.children,h=>{h.checked!==l&&(this._ignoreCheckedOnce(h),h.checked=l)},{childrenKey:Z}),!0},_ignoreCheckedOnce(r){r._ignoreCheckedOnce=!0,setTimeout(()=>{r._ignoreCheckedOnce&&(r._ignoreCheckedOnce=!1)},100)},isVisible(r){const l=r.isStat?r:this.getStat(r),s=h=>!h||!h.hidden&&h.open&&s(h.parent);return!!(!l.hidden&&s(l.parent))},updateCheck(){V(this.stats,r=>{if(r.children&&r.children.length>0){const l=r.children.every(s=>s.checked);r.checked!==l&&(this._ignoreCheckedOnce(r),r.checked=l)}},{childFirst:!0,childrenKey:Z})},getChecked(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.statsFlat.filter(l=>l.checked||r&&l.checked===0)},getUnchecked(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.statsFlat.filter(l=>r?!l.checked:l.checked===!1)},openAll(){for(const r of this.statsFlat)r.open=!0},closeAll(){for(const r of this.statsFlat)r.open=!1},openNodeAndParents(r){const l=r.isStat?r:this.getStat(r);for(const s of this.iterateParent(l,{withSelf:!0}))s.open=!0},_calcFlatIndex(r,l){let s=r?this.statsFlat.indexOf(r)+1:0;const h=r?r.children:this.stats;for(let i=0;i<l;i++)s+=this._count(h[i]);return s},add(r,l,s){if(this.has(r))throw"Can't add because data exists in tree";const h=l?l.children:this.stats;s==null&&(s=h.length);const i=this.statHandler({...Re(),open:!!this.defaultOpen,data:r,parent:l||null,children:[],level:l?l.level+1:1});this._setPosition(i,l||null,s);const o=r[this.childrenKey];if(o){const u=o.slice();for(const d of u)this.add(d,i)}},remove(r){const l=this.getSiblings(r);if(l.includes(r)){Xe(l,r);const s=this._flat(r);this.statsFlat.splice(this.statsFlat.indexOf(r),s.length);for(const h of s)this._statsMap.delete(h.data);return this.afterRemoveStat(r),!0}return!1},getSiblings(r){const{parent:l}=r;return l?l.children:this.stats},_setPosition(r,l,s){(l?l.children:this.stats).splice(s,0,r),r.parent=l,r.level=l?l.level+1:1;const i=this._calcFlatIndex(l,s),o=this._flat(r);this.statsFlat.splice(i,0,...o);for(const u of o)this._statsMap.has(u.data)||this._statsMap.set(u.data,u);V(r,(u,d,f)=>{f&&(u.level=f.level+1)},{childrenKey:Z}),this.afterSetStat(r,l,s)},*iterateParent(r,l){let s=l!=null&&l.withSelf?r:r.parent;for(;s;)yield s,s=s.parent},move(r,l,s){if(this.has(r)){if(r.parent===l&&this.getSiblings(r).indexOf(r)===s)return!1;if(r===l)throw new Error("Can't move node to it self");if(l&&r.level<l.level){let h;for(const i of this.iterateParent(l))if(i.level===r.level){h=i;break}if(r===h)throw new Error("Can't move node to its descendant")}this.remove(r)}return this._setPosition(r,l,s),!0},_flat(r){const l=[];return V(r,s=>{l.push(s)},{childrenKey:Z}),l},_count(r){return this._flat(r).length},getData(r,l){const{childrenKey:s}=this,h=new Be([]);return h.childrenKey=s,V(l||this.stats,(i,o,u,d)=>{let f={...i.data,[s]:[]};r&&(f=r(f)),h.set(d,f)},{childrenKey:Z}),h.data}},c=a;return a.noInitialization||c.init(),c}const Ot={childrenKey:"children",defaultOpen:!1,statsHandler(e){return e},statsFlatHandler(e){return e},afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler(e){return e}};function Re(){return{isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null}}class Me extends Error{constructor(t){super(t),this.name="StatNotFoundError"}}/*!
 * drag-event-service v2.0.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const he={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},ke={isTouch(e){return e.type&&e.type.startsWith("touch")},_getStore(e){return e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore},on(e,t,n,a){const{args:c,mouseArgs:r,touchArgs:l}=ze(a),s=this._getStore(e),h=this,i=function(o){let u;if(h.isTouch(o))u={x:o.changedTouches[0].pageX,y:o.changedTouches[0].pageY,pageX:o.changedTouches[0].pageX,pageY:o.changedTouches[0].pageY,clientX:o.changedTouches[0].clientX,clientY:o.changedTouches[0].clientY,screenX:o.changedTouches[0].screenX,screenY:o.changedTouches[0].screenY};else if(u={x:o.pageX,y:o.pageY,pageX:o.pageX,pageY:o.pageY,clientX:o.clientX,clientY:o.clientY,screenX:o.screenX,screenY:o.screenY},t==="start"&&o.which!==1)return;return n.call(this,o,u)};s.push({handler:n,wrapper:i}),U.call(null,e,he[t][0],i,...c,...r),U.call(null,e,he[t][1],i,...c,...l)},off(e,t,n,a){const{args:c,mouseArgs:r}=ze(a),l=this._getStore(e);for(let s=l.length-1;s>=0;s--){const{handler:h,wrapper:i}=l[s];n===h&&(R.call(null,e,he[t][0],i,...c,...r),R.call(null,e,he[t][1],i,...c,...r),l.splice(s,1))}}};function ze(e){e||(e={});const t=e.args||[],n=e.mouseArgs||[],a=e.touchArgs||[];return{args:t,mouseArgs:n,touchArgs:a}}/*!
 * @he-tree/dnd-utils v0.1.0-alpha.4
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Ce=new Map,W={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},A=W;function re(e){e.dataTransfer&&(e.dataTransfer.dropEffect=A.dropEffect)}function Tt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ce.has(e))throw"Already registered on specified element";const n={...t},a=n;qe(n,Nt),ke.on(e,"start",c,{touchArgs:[{passive:!0}]}),ke.on(e,"end",r);function c(u){var d;const f=u.target;f.nodeType===Node.ELEMENT_NODE&&(A.triggerElement=f);const v=f;if(n.ingoreHTMLTags&&v.tagName&&n.ingoreHTMLTags.find(x=>x.toUpperCase()===v.tagName))return;const y=(d=n.beforeDragStart)===null||d===void 0?void 0:d.call(n,u);y&&(y.setAttribute("draggable","true"),A.dragElement=y)}function r(u){A.dragElement&&A.dragElement.removeAttribute("draggable")}function l(u){var d;A.internal=!0,(d=n.onDragStart)===null||d===void 0||d.call(n,u),re(u)}function s(u){var d;(d=n.onDrag)===null||d===void 0||d.call(n,u),re(u)}function h(u){var d;(d=n.onDragEnd)===null||d===void 0||d.call(n,u),A.internal=!1,A.dragElement&&A.dragElement.removeAttribute("draggable"),A.triggerElement=null,A.dragElement=null,A.dropEffect="none"}const i=Lt(e,{onDragLeave(u){var d;(d=n.onDragLeave)===null||d===void 0||d.call(n,u),re(u)},onDragEnter(u){var d;a.ifPreventDefault(u)&&u.preventDefault(),(d=n.onDragEnter)===null||d===void 0||d.call(n,u),re(u)},onDragOver(u){var d;a.ifPreventDefault(u)&&u.preventDefault(),(d=n.onDragOver)===null||d===void 0||d.call(n,u),re(u)},onDrop(u){var d;a.ifPreventDefault(u)&&u.preventDefault(),(d=n.onDrop)===null||d===void 0||d.call(n,u)},onEnter(u){var d;(d=n.onEnter)===null||d===void 0||d.call(n,u)},onLeave(u){var d;(d=n.onLeave)===null||d===void 0||d.call(n,u)}});return U(e,"dragstart",l),U(e,"drag",s),U(e,"dragend",h),Object.assign(n,{root:e,destroy:()=>{ke.off(e,"start",c,{touchArgs:[{passive:!0}]}),R(e,"dragstart",l),R(e,"drag",s),R(e,"dragend",h),i(),Ce.delete(e)}}),Ce.set(e,a),a}const Nt={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault(e){return W.dragElement?!0:A.preventDefault},beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let ye=null;const Ft=e=>{ye=e,setTimeout(()=>{ye=null},20)};function Lt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e;let a=!1;const c=f=>{var v;a=!0,(v=t.onEnter)===null||v===void 0||v.call(t,f),o.resume()},r=f=>{var v;Ft(f.target),(v=t.onDragEnter)===null||v===void 0||v.call(t,f),a||c(f)},l=f=>{var v;a||c(f),(v=t.onDragOver)===null||v===void 0||v.call(t,f)},s=f=>{var v;(v=t.onDragLeave)===null||v===void 0||v.call(t,f);const y=function(){var _;let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f;a=!1,(_=t.onLeave)===null||_===void 0||_.call(t,O),o.stop()},x=ye;ye=null,x&&vt(x,n)||y()},h=f=>{var v;(v=t.onDrop)===null||v===void 0||v.call(t,f)},i=f=>{var v;f instanceof KeyboardEvent&&f.key!=="Escape"||(a=!1,o.stop(),(v=t.onEndBeforeLeave)===null||v===void 0||v.call(t,f))},o=mt([[e,"drop",i],[window,"mouseup",i],[window,"touchend",i],[window,"keydown",i]]);o.stop();const u=()=>{U(e,"dragenter",r),U(e,"dragover",l),U(e,"dragleave",s),U(e,"drop",h)},d=()=>{R(e,"dragenter",r),R(e,"dragover",l),R(e,"dragleave",s),R(e,"drop",h),o.stop()};return u(),d}/*!
 * @he-tree/vue v2.10.0-beta.1
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://hetree.phphe.com/
 * Released under the MIT License.
 */let be=!1;const Bt=()=>{be=!0,setTimeout(()=>{be=!1},100)},$t=se({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=P(()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"}));Fe(()=>e.stat.checked,r=>{be||e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)}),Fe(()=>e.stat.open,r=>{be||(t(r?"open":"close",e.stat),Bt())});const a=P(()=>{const r=[],l=o=>{var u;if(o.parent){let d=(u=o.parent)==null?void 0:u.children.indexOf(o);do{d++;let f=o.parent.children[d];if(f){if(!f.hidden)return!0}else break}while(!0)}return!1},s=e.rtl?"right":"left",h=e.btt?"top":"bottom";let i=e.stat;for(;i;){let o=(i.level-2)*e.indent+e.treeLineOffset;const u=l(i),d=()=>{r.push({style:{[s]:o+"px",[h]:u?0:"50%"}})};i===e.stat?i.level>1&&d():u&&d(),i=i.parent}return r}),c=P(()=>{let r=(e.stat.level-2)*e.indent+e.treeLineOffset;return{[e.rtl?"right":"left"]:r+"px"}});return{indentStyle:n,vLines:a,hLineStyle:c}}}),Ge=(e,t)=>{const n=e.__vccOpts||e;for(const[a,c]of t)n[a]=c;return n},Kt={class:"tree-node-inner"},At={key:1,class:"tree-node",ref:"el"};function Pt(e,t,n,a,c,r){return e.table?(N(),L("tr",At,[E(e.$slots,"default",{indentStyle:e.indentStyle})],512)):(N(),L("div",{key:0,class:Le(["tree-node",{"tree-node--with-tree-line":e.treeLine}]),style:G(e.indentStyle),ref:"el"},[e.treeLine?(N(),L(le,{key:0},[(N(!0),L(le,null,Ne(e.vLines,l=>(N(),L("div",{class:"tree-line tree-vline",style:G(l.style)},null,4))),256)),e.stat.level>1?(N(),L("div",{key:0,class:"tree-line tree-hline",style:G(e.hLineStyle)},null,4)):Pe("",!0)],64)):Pe("",!0),Ae("div",Kt,[E(e.$slots,"default",{indentStyle:e.indentStyle})])],6))}const It=Ge($t,[["render",Pt]]);function Ht(e,t={}){const n={...t,statHandler(a){return this._statHandler2&&(a=this._statHandler2(a)),_e(t.statHandler,ae(a))},statsHandler(a){return _e(t.statsHandler,ae(a))},statsFlatHandler(a){return _e(t.statsFlatHandler,ae(a))}};return Et(e,n)}function _e(e,t){return e?e(t):t}const Vt=se({components:{VirtualList:wt,TreeNode:It},props:{value:{required:rt,type:Array},modelValue:{required:at,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>Ht([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return this.modelValue||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter(a=>t(a))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit("update:modelValue",e)},_updateValue(e){return this.updateBehavior==="disabled"?!1:(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:we(K("getStat")),has:we(K("has")),updateCheck:K("updateCheck"),getChecked:K("getChecked"),getUnchecked:K("getUnchecked"),openAll:K("openAll"),closeAll:K("closeAll"),openNodeAndParents:K("openNodeAndParents"),isVisible:K("isVisible"),move:We("move"),add:we(We("add")),addMulti(e,t,n){this.batchUpdate(()=>{let a=n;for(const c of e)this.add(c,t,a),a!=null&&a++})},remove:K("remove"),removeMulti(e){let t=[...e];this.batchUpdate(()=>{for(const n of t)this.remove(n)})},iterateParent:K("iterateParent"),getSiblings:K("getSiblings"),getData:K("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue(this.updateBehavior==="new"?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=n=>{if(n){const{childrenKey:a}=this;return n[a]||(n[a]=[]),n[a]}else return this.valueComputed};e._statHandler2=this.statHandler?n=>n.data===this.placeholderData?n:this.statHandler(n):null,e.afterSetStat=(n,a,c)=>{const{childrenKey:r,updateBehavior:l}=this;let s=this.valueComputed;if(l==="new"){if(this.batchUpdateWaiting)return;s=this.getData()}else if(l==="modify"){const h=t(a?.data);h.includes(n.data)||h.splice(c,0,n.data)}this.batchUpdateWaiting||this._updateValue(s)},e.afterRemoveStat=n=>{var a;const{childrenKey:c,updateBehavior:r}=this;let l=this.valueComputed;if(r==="new"){if(this.batchUpdateWaiting)return;l=this.getData()}else if(r==="modify"){const s=t((a=n.parent)==null?void 0:a.data);Xe(s,n.data)}this.batchUpdateWaiting||this._updateValue(l)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,ot(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this.dragOvering||this.dragNode||this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:t}=this;t.data=e,t.init(),this.stats=t.stats,this.statsFlat=t.statsFlat}}}},created(){},mounted(){typeof window<"u"&&(this.watermark===!1&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;"))))}});function K(e){return function(...t){return this.processor[e](...t)}}function We(e){return function(...t){return this.batchUpdate(()=>this.processor[e](...t))}}function we(e){return function(t,...n){return t&&(t=ae(t)),e.call(this,t,...n)}}const Ut={key:0,class:"drag-placeholder he-tree-drag-placeholder"},Rt=["colspan"],Mt={class:"drag-placeholder he-tree-drag-placeholder"};function zt(e,t,n,a,c,r){const l=Te("TreeNode"),s=Te("VirtualList");return N(),et(s,{class:Le(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:J(()=>[E(e.$slots,"prepend",{tree:e.self})]),default:J(({item:h,index:i})=>[je(l,{"vt-index":i,class:Le([h.class,{"drag-placeholder-wrapper":h.data===e.placeholderData,"dragging-node":h===e.dragNode}]),style:G(h.style),stat:h,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor,onClick:o=>e.$emit("click:node",h),onOpen:t[0]||(t[0]=o=>e.$emit("open:node",o)),onClose:t[1]||(t[1]=o=>e.$emit("close:node",o)),onCheck:t[2]||(t[2]=o=>e.$emit("check:node",o))},{default:J(({indentStyle:o})=>[h.data===e.placeholderData?(N(),L(le,{key:0},[e.table?(N(),L("td",{key:1,style:G(o),colspan:e.placeholderColspan},[Ae("div",Mt,[E(e.$slots,"placeholder",{tree:e.self})])],12,Rt)):(N(),L("div",Ut,[E(e.$slots,"placeholder",{tree:e.self})]))],64)):E(e.$slots,"default",{key:1,node:h.data,stat:h,indentStyle:o,tree:e.self},()=>[tt(nt(h.data[e.textKey]),1)])]),_:2},1032,["vt-index","class","style","stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor","onClick"])]),append:J(()=>[E(e.$slots,"append",{tree:e.self})]),_:3},8,["class","items","disabled","table","itemKey"])}const Wt=Ge(Vt,[["render",zt]]);let b=null,g=null,Ee,fe,q,ge,Oe,F,Ke;const Xt={get dragNode(){return F},get closestNode(){return Ke}},Yt=se({extends:Wt,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function},ondragstart:{type:Function},dragOverThrottleInterval:{type:Number,default:0}},data(){return{treeDraggableInstance:null}},computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return t==null?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(e.draggable!=null)return e.draggable;if(this.eachDraggable){const n=this.eachDraggable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDraggable(t):!0},isDroppable(e){if(this.disableDrop)return!1;if(!e)return He(this.rootDroppable,[this,b]);if(e.droppable!=null)return e.droppable;if(this.eachDroppable){const n=this.eachDroppable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDroppable(t):!0},_eachDroppable(){var e;return He((e=this._isDragCopy)==null?void 0:e.call(this),[this])}},mounted(){const e=(i,o)=>{let u=!0;return b&&b!==this&&(u=u&&this._isMoved),this.table&&!this._isDragCopy&&(u=u&&this._isDragCopy),u&&(i.x!==o.x||i.y!==o.y)},t=(i,o)=>{g.ignoreUpdate(()=>{if(!g.has(g.placeholderData)){if(g.table){let d=0;const f=g.getRootEl().querySelector("tr");if(f)for(const{value:v}of dt(f.children))me(v,"display")!=="none"&&(d+=v.colSpan||1);d<1&&(d=1),g.placeholderColspan=d}g.add(g.placeholderData)}const u=g.getStat(g.placeholderData);g.move(u,i,o)})},n=()=>{const i=this;if(i.has(i.placeholderData))return i.remove(i.getStat(i.placeholderData)),!0},a=i=>{i?W.dropEffect=b!=null&&b.dragCopy?"copy":"move":W.dropEffect="none"},c=i=>{const o=this;i?a(!0):o.keepPlaceholder?o.has(o.placeholderData)||a(!1):(n(),a(!1))};let r={x:0,y:0};const l=this.getRootEl();let s=null;const h=()=>{g!=null&&g.has(g.placeholderData)&&g.ignoreUpdate(()=>{g.remove(g.getStat(g.placeholderData)),b&&(b.dragNode.hidden=!1,b.dragOvering=!1)})};this.treeDraggableInstance=Tt(l,{beforeDragStart:i=>{if(!W.triggerElement)return;let o=this.triggerClass;(!o||o.length===0)&&(o="tree-node");let u=it(o),d=Ve(W.triggerElement,f=>{if(Ue(f,u))return!0;if(ve(f,"tree-node"))return"break"},{withSelf:!0,until:l});if(s=Ve(d,f=>{if(ve(f,"tree-node"))return!0},{withSelf:!0,until:l}),!!s){if(F=this.getNodeByElement(s),!F)throw"Can't find drag node";if(this.isDraggable(F))return this.$emit("before-drag-start",F),this.$emit("beforeDragStart",F),l}},onDragStart:i=>{var o,u,d;if(!s||!F)return;{const{x:y,y:x}=s.getBoundingClientRect(),{clientX:_,clientY:O}=i;(o=i.dataTransfer)==null||o.setDragImage(s,_-y,O-x)}Oe={x:i.clientX,y:i.clientY},b=this,b.dragNode=F,ge=(()=>{if(this.resolveStartMovePoint==="mouse")return{x:i.clientX,y:i.clientY};if(typeof this.resolveStartMovePoint=="function")return this.resolveStartMovePoint(s);{let y,x=0;if(this.table){let _=s.getBoundingClientRect();y={x:_.x,y:_.y},this.rtl&&(y.x=_.right),x=_.height}else if(!this.rtl)y=s.children[0].getBoundingClientRect().toJSON(),x=y.height;else{const _=s.children[0].getBoundingClientRect();y={x:_.right,y:_.y},x=_.height}return this.btt&&(y.y+=x),y}})(),this.dragOvering=!0;const f=b.getSiblings(b.dragNode),v=f.indexOf(F);Ee={tree:b,dragNode:F,parent:F.parent,siblings:f,indexBeforeDrop:v},g=this,(u=i.dataTransfer)==null||u.setData("text",`he-tree drag start at ${new Date().toISOString()}`),b._eachDroppable()||setTimeout(()=>{F.hidden=!0,t(F.parent,v+1)},0),(d=this.ondragstart)==null||d.call(this,i)},onEnter:i=>{this.$emit("enter",i)},onLeave:i=>{q=null,this.dragOvering=!1,W.preventDefault=!1,n(),this.$emit("leave",i)},onDragOver:gt(i=>{if(!b){if(!this.onExternalDragOver||this.onExternalDragOver(i)===!1)return;W.preventDefault=!0}if(this.dragOverThrottleInterval>0)if(this._lastValidDragOver==null)this._lastValidDragOver=new Date().getTime();else{let p=new Date().getTime();if(p-this._lastValidDragOver>this.dragOverThrottleInterval)this._lastValidDragOver=p;else return}const o={x:i.clientX,y:i.clientY},u=e(o,r);if(r=o,!u)return;this.dragOvering=!0,g=this;const d=ge?{x:ge.x+(o.x-Oe.x),y:ge.y+(o.y-Oe.y)}:{...o},{btt:f,rtl:v}=g;if(g.disableDrop){W.dropEffect="none";return}let y,x;const _=g.getRootEl().querySelectorAll(".tree-node"),O=[];_.forEach(p=>{!Ue(p,["drag-placeholder-wrapper","dragging-node"])&&me(p,"display")!=="none"&&O.push(p)});const M=$e(O,p=>Se(p)[f?"bottom":"top"]-d.y,{returnNearestIfNoHit:!0});let C=null,H,Q;M.hit||(M.greater?f||(C=M.index-1,O[C]||C++):f&&(C=M.index+1,O[C]||C--)),C==null&&(C=M.index),H=O[C],Q=f?O[C-1]:O[C+1],y=H&&g.getNodeByElement(H),x=Q&&g.getNodeByElement(Q);const{indent:j}=g,B=ne(()=>{if(g.table){let p=Se(H).toJSON();const w=j*(y.level-1);return v?(p.width-=w,p.right-=w):p.x+=w,p}else return Se(H.firstElementChild)}).action,ee=ne(()=>f?d.y>B().y+B().height/2:d.y<B().y+B().height/2).action,De=ne(()=>f?!H||C===O.length-1&&ee():!H||C===0&&ee()).action,ie=ne(()=>v?d.x-(B().x+B().width):B().x-d.x).action,D=ne(()=>v?d.x<B().x+B().width-j:d.x>B().x+j).action;let m;if(De())m=1,y=null;else if(y)ie()>0?m=y.level-Math.ceil(ie()/j):D()?m=y.level+1:m=y.level;else return;x&&m<x.level&&(m=x.level),(async()=>{let p,w,I=!1,$=null;const X=async S=>{if(S.open)return!0;if(g.dragOpen)if(g.dragOpenDelay)if($=S,q===S)I=!0;else{let k=pt();q=S;const T=S;return setTimeout(async()=>{T!==q?(I=!0,k.resolve(!0)):(g.beforeDragOpen&&await g.beforeDragOpen(S),T!==q?(I=!0,k.resolve(!0)):(S.open=!0,$=null,k.resolve(!0)))},g.dragOpenDelay),await k.promise}else return g.beforeDragOpen&&await g.beforeDragOpen(S),S.open=!0,!0;else return!1},oe=async()=>{if(g.isDroppable(y)&&await X(y)){if(I)return;p=y,w=null}else return!1},de=(S=m)=>{let k=y,T=[];for(;k&&k.level>=S;)k=k.parent||null,T.unshift(k);let z=0;for(const Y of T){if(g.isDroppable(Y))return p=Y,w=T[z+1]||y,!0;z++}return!1};Ke=y||null,y?m>y.level?await oe()===!1&&de(y.level):de()===!1&&await oe():g.isDroppable(null)&&(p=null),q=$;const ce=!!(!I&&(p||p===null));return{cancelled:I,success:ce,parent:p,index:ce?w?(p?p.children:g.stats).filter(S=>S.data!==g.placeholderData).indexOf(w)+1:0:-1}})().then(p=>{if(!p.cancelled){if(!p.success){c(!1);return}if(g.maxLevel!=null&&g.maxLevel>0){let w=1;if(b){const I=b.dragNode;let $=0;V(I,X=>{X.level>$&&($=X.level)},{childrenKey:Z}),w=$-I.level+1}if(w+(p.parent?p.parent.level:0)>g.maxLevel){c(!1);return}}c(!0),t(p.parent,p.index)}})}),onDrop:i=>{g=this;const o=!b;if(!g)return;const u=b?.dragNode;let d,f=(()=>{var v;let y=!0;if(!g.has(g.placeholderData))y=!1;else if(o)d=(v=this.externalDataHandler)==null?void 0:v.call(this,i),y=d!=null;else if(!b.dragCopy){const x=g.getStat(g.placeholderData);b===g&&x.parent===u.parent&&ft(u,_=>_===x)}return y})();if(f){const v=g.getStat(g.placeholderData),y=g.getSiblings(v);fe={tree:g,dragNode:u,parent:v.parent,siblings:y,indexBeforeDrop:y.indexOf(v)}}(()=>{if(h(),f){let v=fe.indexBeforeDrop;b&&!b.dragCopy&&b===g&&Ee.parent==fe.parent&&Ee.indexBeforeDrop<v&&v--,b&&b!==g&&!b._eachDroppable()&&b.batchUpdate(()=>{b.remove(u),b.updateCheck()}),g.batchUpdate(()=>{let y=b?.dragNode,x;d?x=d:b._eachDroppable()&&(x=Ze(b.dragNode.data,{childrenKey:b.childrenKey}),b.dragCopyDataHandler&&(x=b.dragCopyDataHandler(x))),x&&(g.add(x),y=g.getStat(x)),g.move(y,fe.parent,v),g.updateCheck()})}g.$emit("after-drop"),f&&(b&&(b.dragCopy||b.$emit("change")),g!==b&&g.$emit("change"))})()},onDragEnd:i=>{h(),b&&(b.dragNode&&(b.dragNode.hidden=!1),b.dragNode=null,b.dragOvering=!1,b=null),g=null,q=null,F=null,Ke=null}})},unmounted(){var e;(e=this.treeDraggableInstance)==null||e.destroy()}});export{Yt as A,Xt as l,V as w};
