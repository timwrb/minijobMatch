import{W as de,X as Y,_ as ne,Y as ce,Z as ue,A as se,r as C,i as ie,d as E,o as v,k as A,l as B,F as le,N as ae,w as D,c as O,p as U,$ as he,a0 as fe,a1 as ge,a2 as pe,b as me,f as m,n as G,H as V,t as z,v as X,m as ve,P as ke,a3 as we,a4 as be,a5 as ye,a6 as xe}from"./index-DmYaZOZj.js";class _e extends de{#e=!1;constructor(e=!1,r){super(r),this.#e=!!e}code(e){if(!this.#e)return e.text;let r="";return e.lang&&(r=`${e.lang}:
`),e.text.split(`
`).forEach(l=>{r=`${r}	${l}
`}),r}blockquote({tokens:e}){const r=this.parser.parse(e);let l=r;return l.endsWith(`
`)&&(l=l.slice(0,-1)),this.#e?`
	"${r.split(`
`).map((o,s)=>s===0?o:o==="	"||o===""?"":`	${o}`).join(`
`)}"
`:`"${r}"
`}html(){return""}heading(e){const r=e.text;if(this.#e){if(e.depth===1)return`
${r}

`;if(e.depth===2)return`
${r}
`}return`${r}
`}hr(){return this.#e?`${"-".repeat(25)}
`:`
`}list({items:e}){return`${e.map(r=>this.listitem(r)).join(`
`)}
`}listitem(e){return`- ${e.text}`}checkbox(e){return this.#e?e.checked?`[x]
`:`[ ]
`:""}paragraph({tokens:e}){return`${this.parser.parseInline(e)}
`}table(e){return`${e.header}
${e.rows.flatMap(r=>r.map(l=>l.text)).join(`
`)}
`}tablerow(e){return this.#e?e.text.slice(1)+` |
`:`
${e.text}
`}tablecell(e){return this.#e?` | ${e.text}`:e.text}strong(e){return this.#e?e.text.toUpperCase():e.text}em({tokens:e}){return this.#e?`*${this.parser.parseInline(e)}*`:this.parser.parseInline(e)}codespan(e){return this.#e?`\`${e.text}\``:e.text}br(){return`
`}del(e){return this.#e?`~${e.text}~`:e.text}link(e){if(!this.#e)return e.text;const{href:r,title:l,text:o}=e;return`${o} (${l?`${l} `:""}${r})`}image(e){if(!this.#e)return e.text;const{href:r,title:l,text:o}=e;return`${o}(${l?`${l} `:""}${r})`}text(e){return e.text}}var N={exports:{}},Q;function Ce(){return Q||(Q=1,function(t,e){(function(r){r(Y())})(function(r){var l={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},o=r.Pos;r.defineOption("autoCloseBrackets",!1,function(n,i,d){d&&d!=r.Init&&(n.removeKeyMap(a),n.state.closeBrackets=null),i&&(c(s(i,"pairs")),n.state.closeBrackets=i,n.addKeyMap(a))});function s(n,i){return i=="pairs"&&typeof n=="string"?n:typeof n=="object"&&n[i]!=null?n[i]:l[i]}var a={Backspace:f,Enter:b};function c(n){for(var i=0;i<n.length;i++){var d=n.charAt(i),u="'"+d+"'";a[u]||(a[u]=S(d))}}c(l.pairs+"`");function S(n){return function(i){return F(i,n)}}function k(n){var i=n.state.closeBrackets;if(!i||i.override)return i;var d=n.getModeAt(n.getCursor());return d.closeBrackets||i}function f(n){var i=k(n);if(!i||n.getOption("disableInput"))return r.Pass;for(var d=s(i,"pairs"),u=n.listSelections(),h=0;h<u.length;h++){if(!u[h].empty())return r.Pass;var x=R(n,u[h].head);if(!x||d.indexOf(x)%2!=0)return r.Pass}for(var h=u.length-1;h>=0;h--){var g=u[h].head;n.replaceRange("",o(g.line,g.ch-1),o(g.line,g.ch+1),"+delete")}}function b(n){var i=k(n),d=i&&s(i,"explode");if(!d||n.getOption("disableInput"))return r.Pass;for(var u=n.listSelections(),h=0;h<u.length;h++){if(!u[h].empty())return r.Pass;var x=R(n,u[h].head);if(!x||d.indexOf(x)%2!=0)return r.Pass}n.operation(function(){var g=n.lineSeparator()||`
`;n.replaceSelection(g+g,null),y(n,-1),u=n.listSelections();for(var _=0;_<u.length;_++){var q=u[_].head.line;n.indentLine(q,null,!0),n.indentLine(q+1,null,!0)}})}function y(n,i){for(var d=[],u=n.listSelections(),h=0,x=0;x<u.length;x++){var g=u[x];g.head==n.getCursor()&&(h=x);var _=g.head.ch||i>0?{line:g.head.line,ch:g.head.ch+i}:{line:g.head.line-1};d.push({anchor:_,head:_})}n.setSelections(d,h)}function T(n){var i=r.cmpPos(n.anchor,n.head)>0;return{anchor:new o(n.anchor.line,n.anchor.ch+(i?-1:1)),head:new o(n.head.line,n.head.ch+(i?1:-1))}}function F(n,i){var d=k(n);if(!d||n.getOption("disableInput"))return r.Pass;var u=s(d,"pairs"),h=u.indexOf(i);if(h==-1)return r.Pass;for(var x=s(d,"closeBefore"),g=s(d,"triples"),_=u.charAt(h+1)==i,q=n.listSelections(),W=h%2==0,P,K=0;K<q.length;K++){var Z=q[K],p=Z.head,M,H=n.getRange(p,o(p.line,p.ch+1));if(W&&!Z.empty())M="surround";else if((_||!W)&&H==i)_&&w(n,p)?M="both":g.indexOf(i)>=0&&n.getRange(p,o(p.line,p.ch+3))==i+i+i?M="skipThree":M="skip";else if(_&&p.ch>1&&g.indexOf(i)>=0&&n.getRange(o(p.line,p.ch-2),p)==i+i){if(p.ch>2&&/\bstring/.test(n.getTokenTypeAt(o(p.line,p.ch-2))))return r.Pass;M="addFour"}else if(_){var J=p.ch==0?" ":n.getRange(o(p.line,p.ch-1),p);if(!r.isWordChar(H)&&J!=i&&!r.isWordChar(J))M="both";else return r.Pass}else if(W&&(H.length===0||/\s/.test(H)||x.indexOf(H)>-1))M="both";else return r.Pass;if(!P)P=M;else if(P!=M)return r.Pass}var L=h%2?u.charAt(h-1):i,j=h%2?i:u.charAt(h+1);n.operation(function(){if(P=="skip")y(n,1);else if(P=="skipThree")y(n,3);else if(P=="surround"){for(var $=n.getSelections(),I=0;I<$.length;I++)$[I]=L+$[I]+j;n.replaceSelections($,"around"),$=n.listSelections().slice();for(var I=0;I<$.length;I++)$[I]=T($[I]);n.setSelections($)}else P=="both"?(n.replaceSelection(L+j,null),n.triggerElectric(L+j),y(n,-1)):P=="addFour"&&(n.replaceSelection(L+L+L+L,"before"),y(n,1))})}function R(n,i){var d=n.getRange(o(i.line,i.ch-1),o(i.line,i.ch+1));return d.length==2?d:null}function w(n,i){var d=n.getTokenAt(o(i.line,i.ch+1));return/\bstring/.test(d.type)&&d.start==i.ch&&(i.ch==0||!/\bstring/.test(n.getTokenTypeAt(i)))}})}()),N.exports}Ce();var ee={exports:{}},te;function Se(){return te||(te=1,function(t,e){(function(r){r(Y())})(function(r){r.defineOption("autoRefresh",!1,function(s,a){s.state.autoRefresh&&(o(s,s.state.autoRefresh),s.state.autoRefresh=null),a&&s.display.wrapper.offsetHeight==0&&l(s,s.state.autoRefresh={delay:a.delay||250})});function l(s,a){function c(){s.display.wrapper.offsetHeight?(o(s,a),s.display.lastWrapHeight!=s.display.wrapper.clientHeight&&s.refresh()):a.timeout=setTimeout(c,a.delay)}a.timeout=setTimeout(c,a.delay),a.hurry=function(){clearTimeout(a.timeout),a.timeout=setTimeout(c,50)},r.on(window,"mouseup",a.hurry),r.on(window,"keyup",a.hurry)}function o(s,a){clearTimeout(a.timeout),r.off(window,"mouseup",a.hurry),r.off(window,"keyup",a.hurry)}})}()),ee.exports}Se();var re={exports:{}},oe;function Te(){return oe||(oe=1,function(t,e){(function(r){r(Y())})(function(r){var l=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,o=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,s=/[*+-]\s/;r.commands.newlineAndIndentContinueMarkdownList=function(c){if(c.getOption("disableInput"))return r.Pass;for(var S=c.listSelections(),k=[],f=0;f<S.length;f++){var b=S[f].head,y=c.getStateAfter(b.line),T=r.innerMode(c.getMode(),y);if(T.mode.name!=="markdown"&&T.mode.helperType!=="markdown"){c.execCommand("newlineAndIndent");return}else y=T.state;var F=y.list!==!1,R=y.quote!==0,w=c.getLine(b.line),n=l.exec(w),i=/^\s*$/.test(w.slice(0,b.ch));if(!S[f].empty()||!F&&!R||!n||i){c.execCommand("newlineAndIndent");return}if(o.test(w)){var d=R&&/>\s*$/.test(w),u=!/>\s*$/.test(w);(d||u)&&c.replaceRange("",{line:b.line,ch:0},{line:b.line,ch:b.ch+1}),k[f]=`
`}else{var h=n[1],x=n[5],g=!(s.test(n[2])||n[2].indexOf(">")>=0),_=g?parseInt(n[3],10)+1+n[4]:n[2].replace("x"," ");k[f]=`
`+h+_+x,g&&a(c,b)}}c.replaceSelections(k)};function a(c,S){var k=S.line,f=0,b=0,y=l.exec(c.getLine(k)),T=y[1];do{f+=1;var F=k+f,R=c.getLine(F),w=l.exec(R);if(w){var n=w[1],i=parseInt(y[3],10)+f-b,d=parseInt(w[3],10),u=d;if(T===n&&!isNaN(d))i===d&&(u=d+1),i>d&&(u=i+1),c.replaceRange(R.replace(l,n+u+w[4]+w[5]),{line:F,ch:0},{line:F,ch:R.length});else{if(T.length>n.length||T.length<n.length&&f===1)return;b+=1}}}while(w)}})}()),re.exports}Te();const Re={components:{Button:se,ToggleGroup:ue,ToggleItem:ce},props:{buttons:{type:Array,required:!0},isReadOnly:{type:Boolean,default:!1},showDarkMode:{type:Boolean,default:!1},darkMode:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1}},data(){return{mode:"write"}},watch:{mode(t){this.$emit("update:mode",t)}},emits:["update:mode","toggle-dark-mode","button-click"],methods:{handleButtonClick(t){this.$emit("button-click",t.command)}}},Ae={"data-markdown-toolbar":""},Be={key:0,class:"flex items-center"};function Fe(t,e,r,l,o,s){const a=C("Button"),c=C("ToggleItem"),S=C("ToggleGroup"),k=ie("tooltip");return v(),E("div",Ae,[r.isReadOnly?A("",!0):(v(),E("div",Be,[(v(!0),E(le,null,ae(r.buttons,f=>D((v(),O(a,{"aria-label":f.text,icon:f.svg,key:f.name,onClick:b=>s.handleButtonClick(f),size:"sm",variant:"ghost"},null,8,["aria-label","icon","onClick"])),[[k,f.text]])),128))])),B(S,{modelValue:o.mode,"onUpdate:modelValue":e[0]||(e[0]=f=>o.mode=f),size:"sm",class:"-me-1","data-markdown-mode-toggle":""},{default:U(()=>[D(B(c,{icon:"pencil",value:"write"},null,512),[[k,t.__("Writing Mode")]]),D(B(c,{icon:"eye",value:"preview"},null,512),[[k,t.__("Preview Mode")]])]),_:1},8,["modelValue"])])}const Me=ne(Re,[["render",Fe]]);function $e(t){const e=[];let r=0;const l=t.length;for(;r<l;){const o=t.charCodeAt(r++);if(o>=55296&&o<=56319&&r<l){const s=t.charCodeAt(r++);(s&64512)==56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),r--)}else e.push(o)}return e}const Ie={mixins:[me],components:{Button:se,AssetSelector:pe,Uploader:ge,Uploads:fe,MarkdownToolbar:Me},data(){return{data:this.value||"",buttons:[],mode:"write",selections:null,showAssetSelector:!1,selectedAssets:[],draggingFile:!1,showCheatsheet:!1,fullScreenMode:!1,darkMode:!1,codemirror:null,uploads:[],count:{characters:0,words:0},escBinding:null,markdownPreviewText:null,showFloatingToolbar:!1,floatingToolbarX:0,floatingToolbarY:0}},watch:{data:{handler(t){this.updateDebounced(t),this.updateCount(t)}},mode:{handler(t){t==="preview"&&this.updateMarkdownPreview()}},readOnly:{handler(t){this.codemirror.setOption("readOnly",t?"nocursor":!1)}}},mounted(){this.initToolbarButtons(),this.$nextTick(()=>{this.initCodeMirror()}),this.data&&this.updateCount(this.data)},beforeUnmount(){this.$events.$off("livepreview.opened",this.throttledResizeEvent),this.$events.$off("livepreview.closed",this.throttledResizeEvent),this.$events.$off("livepreview.resizing",this.throttledResizeEvent),this.codemirror&&this.toolbarIsFloating&&(this.codemirror.off("cursorActivity",this.handleCursorActivity),this.codemirror.off("blur",this.hideFloatingToolbar))},methods:{closeFullScreen(){this.fullScreenMode=!1,this.escBinding.destroy(),this.trackHeightUpdates()},openFullScreen(){this.fullScreenMode=!0,this.escBinding=this.$keys.bindGlobal("esc",this.closeFullScreen),this.trackHeightUpdates()},toggleFullscreen(){this.fullScreenMode=!this.fullScreenMode,this.trackHeightUpdates()},toggleDarkMode(){this.darkMode=!this.darkMode},getText(t){const e=this.selections.indexOf(t);return this.codemirror.getSelections()[e]},toggleInline(t){const e={bold:{pattern:/^\*{2}(.*)\*{2}$/,delimiter:"**"},code:{pattern:/^\`(.*)\`$/,delimiter:"`"},italic:{pattern:/^\_(.*)\_$/,delimiter:"_"},strikethrough:{pattern:/^\~\~(.*)\~\~$/,delimiter:"~~"}},r=this.selections.map(l=>{const o=this.getText(l),{delimiter:s,pattern:a}=e[t];return o.match(a)?this.removeInline(l,s):`${s}${o}${s}`});this.codemirror.replaceSelections(r,"around"),this.codemirror.focus()},toggleBlock(t){const e=this.selections.map(r=>{const l=this.getText(r),o="```";return l.match(new RegExp("^```(.*)\n(.*)\n```$"))?this.removeInline(r,o):`${o}
${l}
${o}`});this.codemirror.replaceSelections(e,"around"),this.codemirror.focus()},removeInline(t,e){return this.getText(t).slice(e.length,-e.length)},toggleLine(t){const e=this.codemirror.getCursor("start"),r=this.codemirror.getCursor("end"),l={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},o={quote:"> ","unordered-list":"- ","ordered-list":"1. "};for(let s=e.line;s<=r.line;s++){const a=this.codemirror.getLine(s),c=this.isInside(t)?a.replace(l[t],"$1"):o[t]+a;this.codemirror.replaceRange(c,{line:s,ch:0},{line:s,ch:1/0})}this.codemirror.focus()},getState(t){t=t||this.codemirror.getCursor("start");const e=this.codemirror.getTokenAt(t);if(!e.type)return{};const r=e.type.split(" "),l={},o=this.codemirror.getLine(t.line);return r.forEach(s=>{switch(s){case"strong":l.bold=!0;break;case"variable-2":l[/^\s*\d+\.\s/.test(o)?"ordered-list":"unordered-list"]=!0;break;case"atom":case"quote":l.quote=!0;break;case"em":l.italic=!0;break;case"strikethrough":l.strikethrough=!0;break;case"comment":l.code=!0;break;case"link":l.link=!0;break;case"tag":l.image=!0;break;default:s.match(/^header(\-[1-6])?$/)&&(l[s.replace("header","heading")]=!0)}}),l},isInside(t){return this.getState()[t]??!1},insertTable(){const t=this.codemirror.getDoc(),e=t.getCursor(),r=t.getLine(e.line),l={line:e.line},o=`|     |     |
| --- | --- |
|     |     |`;r.length===0?t.replaceRange(o,l):(t.replaceRange(`

`+o,l),e.line+=2),this.codemirror.focus(),this.codemirror.setCursor(e.line,2)},insertImage(t,e){const r=this.codemirror.doc,l=r.somethingSelected()?r.getSelection():e||"",o=`![${l}](${t||""})`;r.replaceSelection(o,"start");const s=r.getCursor().line,a=r.getCursor().ch+2,c=a+l.length;r.setSelection({line:s,ch:a},{line:s,ch:c}),this.codemirror.focus()},appendImage(t,e=""){this.data+=`

![${e}](${t})`},insertLink(t,e){const r=this.codemirror.doc,l=r.somethingSelected()?r.getSelection():e||"";if(!t&&(t=prompt(__("Enter URL"),"https://"),!t))return;const o=`[${l}](${t})`;r.replaceSelection(o,"start");const s=r.getCursor().line,a=r.getCursor().ch+1,c=a+l.length;r.setSelection({line:s,ch:a},{line:s,ch:c}),this.codemirror.focus()},appendLink(t,e=""){this.data+=`

[${e}](${t})`},addAsset(){this.assetsEnabled&&(this.showAssetSelector=!0)},shortcut(t){if(!(t.metaKey||t.ctrlKey))return;if(this.assetsEnabled&&t.shiftKey&&t.keyCode===65){t.preventDefault(),this.addAsset();return}const r={66:()=>this.toggleInline("bold"),73:()=>this.toggleInline("italic")};r[t.keyCode]&&(t.preventDefault(),r[t.keyCode]())},assetsSelected(t){this.closeAssetSelector(),this.selectedAssets=[],this.$axios.post(cp_url("assets-fieldtype"),{assets:t}).then(({data:e})=>{e.forEach(r=>{const l=r.values.alt||"",o=encodeURI(`statamic://${r.reference}`),s=t.length===1?"insert":"append";r.isImage?this[`${s}Image`](o,l):this[`${s}Link`](o,l)})})},closeAssetSelector(){this.showAssetSelector=!1},uploadsUpdated(t){this.uploads=t},uploadComplete(t,e){t.is_image?this.insertImage(t.url):this.insertLink(t.url),e.length>1&&this.codemirror.setCursor(this.codemirror.lineCount(),0)},focus(){this.codemirror.focus()},focusCodeMirror(){this.codemirror&&this.codemirror.focus()},trackHeightUpdates(){this.$events.$on("livepreview.opened",this.throttledResizeEvent),this.$events.$on("livepreview.closed",this.throttledResizeEvent),this.$events.$on("livepreview.resizing",this.throttledResizeEvent)},throttledResizeEvent:he(function(){window.dispatchEvent(new Event("resize"))},100),updateMarkdownPreview(){this.$axios.post(this.meta.previewUrl,{value:this.data,config:this.config}).then(t=>this.markdownPreviewText=t.data).catch(t=>this.$toast.error(t.response?t.response.data.message:__("Something went wrong")))},initCodeMirror(){var t=this;t.codemirror=ye(xe(this.$refs.codemirror,{value:t.data,mode:"gfm",dragDrop:!1,keyMap:"sublime",direction:document.querySelector("html").getAttribute("dir")??"ltr",lineWrapping:!0,viewportMargin:1/0,tabindex:0,autoRefresh:!0,readOnly:t.isReadOnly?"nocursor":!1,inputStyle:"contenteditable",spellcheck:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList","Cmd-Left":"goLineLeftSmart"}})),this.toolbarIsFloating&&(t.codemirror.on("cursorActivity",this.handleCursorActivity),t.codemirror.on("blur",this.hideFloatingToolbar)),t.codemirror.on("change",function(e){t.data=e.doc.getValue()}),t.codemirror.on("focus",()=>t.$emit("focus")),t.codemirror.on("blur",()=>t.$emit("blur")),t.codemirror.on("beforeSelectionChange",function(e,r){t.selections=r.ranges}),this.$watch("value",function(e){e!==t.codemirror.doc.getValue()&&t.codemirror.doc.setValue(e)}),this.trackHeightUpdates()},refresh(){this.$nextTick(function(){this.codemirror.refresh()})},initToolbarButtons(){let t=this.config.buttons.map(e=>be().find(r=>r.name===e.toLowerCase())||e);t=t.filter(e=>e.condition?e.condition.call(null,this.config):!0),this.buttons=t},updateCount(t){const e=t.trim(),r=$e(e.replace(/\s/g,"")).length,l=e.split(/\s+/).filter(o=>o.length>0).length;this.count={characters:r,words:l}},handleButtonClick(t){t(this)},handleCursorActivity(){if(!this.toolbarIsFloating)return;const t=this.codemirror.getSelection();if(t&&t.length>0&&!this.isReadOnly){const e=this.codemirror.getDoc();this.selections=e.listSelections(),this.showFloatingToolbar=!0,this.updateFloatingToolbarPosition()}else this.showFloatingToolbar=!1},hideFloatingToolbar(){this.showFloatingToolbar=!1},updateFloatingToolbarPosition(){if(!this.codemirror||!this.showFloatingToolbar)return;const t=this.codemirror.getCursor("from"),e=this.codemirror.getCursor("to"),r=this.codemirror.cursorCoords(t),l=this.codemirror.cursorCoords(e),o=this.codemirror.getWrapperElement().getBoundingClientRect(),s=Math.round((r.left+l.right)/2-o.left),a=Math.round(r.top-o.top-50);this.floatingToolbarX=s,this.floatingToolbarY=a}},computed:{assetsEnabled(){return!!this.config?.container},container(){return this.meta.assets?.container},assetSelectorColumns(){return this.meta.assets?.columns},editor(){return this},folder(){return this.config.folder||"/"},restrictAssetNavigation(){return this.config.restrict_assets||!1},toolbarIsFixed(){return this.config.toolbar_mode==="fixed"},toolbarIsFloating(){return this.config.toolbar_mode==="floating"},showFixedToolbar(){return this.toolbarIsFixed&&this.buttons.length>0},replicatorPreview(){if(this.showFieldPreviews)return we(this.data||"",{renderer:new _e}).replace(/<\/?[^>]+(>|$)/g,"")},internalFieldActions(){return[{title:__("Toggle Fullscreen Mode"),icon:({vm:t})=>t.fullScreenMode?"collapse-all":"expand-all",quick:!0,visibleWhenReadOnly:!0,run:this.toggleFullscreen}]}}},Oe={class:"drag-notification"},Pe={class:"editor relative z-6 st-text-legibility focus-within:focus-outline focus-outline-discrete",ref:"codemirror"},Ee=["id"],Le={class:"markdown-cheatsheet-helper"},ze={key:0,class:"flex items-center pe-2 gap-3 text-xs"},Ue={class:"whitespace-nowrap"},De=["textContent"],qe={class:"whitespace-nowrap"},He=["textContent"],Ve={key:1,class:"drag-notification"},We=["innerHTML"],Ke={class:"relative h-full overflow-auto bg-white p-6 dark:bg-gray-800 rounded-l-2xl"},je={class:"prose dark:prose-invert prose-zinc prose-headings:font-medium prose-pre:prose-code:!text-white mx-auto my-8 max-w-3xl"},Ge=["textContent"],Xe=["innerHTML"];function Ye(t,e,r,l,o,s){const a=C("markdown-toolbar"),c=C("publish-field-fullscreen-header"),S=C("ui-icon"),k=C("uploads"),f=C("Button"),b=C("uploader"),y=C("asset-selector"),T=C("stack"),F=C("element-container"),R=C("portal"),w=ie("tooltip");return v(),O(R,{name:"markdown-fullscreen",disabled:!o.fullScreenMode,"target-class":"markdown-fieldtype"},{default:U(()=>[B(F,{onResized:s.refresh},{default:U(()=>[m("div",{class:G(["@container/markdown w-full block bg-white dark:bg-gray-900! rounded-lg relative border border-gray-300 with-contrast:border-gray-500 dark:border-white/15 dark:inset-shadow-2xs dark:inset-shadow-black text-gray-900 dark:text-gray-300 appearance-none antialiased shadow-ui-sm disabled:shadow-none",{"markdown-fullscreen":o.fullScreenMode,"markdown-dark-mode":o.darkMode,"border-dashed":t.isReadOnly}])},[B(b,{ref:"uploader",enabled:s.assetsEnabled,container:s.container,path:s.folder,onUpdated:s.uploadsUpdated,onUploadComplete:s.uploadComplete},{default:U(({dragging:n})=>[m("div",null,[o.fullScreenMode?(v(),O(c,{key:0,title:t.config.display,"field-actions":t.fieldActions,onClose:s.toggleFullscreen},{default:U(()=>[o.fullScreenMode?(v(),O(a,{key:0,mode:o.mode,"onUpdate:mode":e[0]||(e[0]=i=>o.mode=i),buttons:o.buttons,"is-read-only":t.isReadOnly,"show-dark-mode":o.fullScreenMode,"dark-mode":o.darkMode,"is-fullscreen":!0,onToggleDarkMode:s.toggleDarkMode,onButtonClick:s.handleButtonClick},null,8,["mode","buttons","is-read-only","show-dark-mode","dark-mode","onToggleDarkMode","onButtonClick"])):A("",!0)]),_:1},8,["title","field-actions","onClose"])):A("",!0),!o.fullScreenMode&&s.showFixedToolbar?(v(),O(a,{key:1,mode:o.mode,"onUpdate:mode":e[1]||(e[1]=i=>o.mode=i),buttons:o.buttons,"is-read-only":t.isReadOnly,"show-dark-mode":!1,"dark-mode":o.darkMode,"is-fullscreen":!1,onToggleDarkMode:s.toggleDarkMode,onButtonClick:s.handleButtonClick},null,8,["mode","buttons","is-read-only","dark-mode","onToggleDarkMode","onButtonClick"])):A("",!0),D(m("div",Oe,[B(S,{name:"upload",class:"mb-4 size-12"}),V(" "+z(t.__("Drop File to Upload")),1)],512),[[X,n]]),o.uploads.length?(v(),O(k,{key:2,uploads:o.uploads,class:"-mt-px"},null,8,["uploads"])):A("",!0),m("div",{class:G(`mode-wrap mode-${o.mode}`,{"prose p-3":o.mode=="preview"}),onClick:e[9]||(e[9]=(...i)=>s.focus&&s.focus(...i))},[D(m("div",{class:"markdown-writer",ref:"writer",onDragover:e[5]||(e[5]=i=>o.draggingFile=!0),onDragleave:e[6]||(e[6]=i=>o.draggingFile=!1),onDrop:e[7]||(e[7]=i=>o.draggingFile=!1),onKeydown:e[8]||(e[8]=(...i)=>s.shortcut&&s.shortcut(...i))},[m("div",Pe,[o.showFloatingToolbar&&s.toolbarIsFloating&&!t.isReadOnly?(v(),E("div",{key:0,class:"markdown-floating-toolbar absolute z-50 flex items-center gap-1 rounded-lg border border-gray-300 bg-white px-2 py-1 shadow-lg dark:border-white/10 dark:bg-gray-900",style:ke({left:`${o.floatingToolbarX}px`,top:`${o.floatingToolbarY}px`}),onMousedown:e[2]||(e[2]=ve(()=>{},["prevent"]))},[(v(!0),E(le,null,ae(o.buttons,i=>D((v(),O(f,{"aria-label":i.text,icon:i.svg,key:i.name,onClick:d=>s.handleButtonClick(i.command),size:"sm",variant:"ghost"},null,8,["aria-label","icon","onClick"])),[[w,i.text]])),128))],36)):A("",!0)],512),t.id?(v(),E("input",{key:0,id:t.id,type:"text",class:"sr-only",onFocus:e[3]||(e[3]=(...i)=>s.focusCodeMirror&&s.focusCodeMirror(...i)),tabindex:"-1"},null,40,Ee)):A("",!0),m("footer",{class:G(["flex items-center justify-between bg-gray-50 dark:bg-gray-950 rounded-b-[calc(var(--radius-lg)-1px)] border-t border-gray-200 dark:border-white/10 p-1 text-sm w-full",{"absolute inset-x-0 bottom-0 rounded-":o.fullScreenMode}])},[m("div",Le,[B(f,{icon:"markdown",size:"sm",variant:"subtle",onClick:e[4]||(e[4]=i=>o.showCheatsheet=!0),"aria-label":t.__("Show Markdown Cheatsheet"),text:t.__("Markdown Cheatsheet")},null,8,["aria-label","text"])]),o.fullScreenMode?(v(),E("div",ze,[m("div",Ue,[m("span",{textContent:z(o.count.words)},null,8,De),V(" "+z(t.__("Words")),1)]),m("div",qe,[m("span",{textContent:z(o.count.characters)},null,8,He),V(" "+z(t.__("Characters")),1)])])):A("",!0)],2),s.assetsEnabled&&o.draggingFile?(v(),E("div",Ve,[B(S,{name:"upload",class:"mb-4 size-12"}),V(" "+z(t.__("Drop File to Upload")),1)])):A("",!0)],544),[[X,o.mode=="write"]]),D(m("div",{innerHTML:o.markdownPreviewText,class:"markdown-preview p-3 prose prose-sm @md/markdown:prose-base"},null,8,We),[[X,o.mode=="preview"]])],2)])]),_:1},8,["enabled","container","path","onUpdated","onUploadComplete"]),o.showAssetSelector&&!t.isReadOnly?(v(),O(T,{key:0,name:"markdown-asset-selector",onClosed:s.closeAssetSelector},{default:U(()=>[B(y,{container:s.container,folder:s.folder,selected:o.selectedAssets,"restrict-folder-navigation":s.restrictAssetNavigation,columns:s.assetSelectorColumns,onSelected:s.assetsSelected,onClosed:s.closeAssetSelector},null,8,["container","folder","selected","restrict-folder-navigation","columns","onSelected","onClosed"])]),_:1},8,["onClosed"])):A("",!0),o.showCheatsheet?(v(),O(T,{key:1,name:"markdownCheatSheet",onClosed:e[11]||(e[11]=n=>o.showCheatsheet=!1)},{default:U(()=>[m("div",Ke,[B(f,{icon:"x",variant:"ghost",class:"absolute top-4 end-4",onClick:e[10]||(e[10]=n=>o.showCheatsheet=!1)}),m("div",je,[m("h2",{textContent:z(t.__("Markdown Cheatsheet"))},null,8,Ge),m("div",{innerHTML:t.__("markdown.cheatsheet")},null,8,Xe)])])]),_:1})):A("",!0)],2)]),_:1},8,["onResized"])]),_:1},8,["disabled"])}const Je=ne(Ie,[["render",Ye]]);export{Je as default};
