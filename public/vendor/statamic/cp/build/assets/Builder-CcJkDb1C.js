import{A as ee,w as F,l as A}from"./index-CiZTVuMj.js";import{_ as T,A as P,D as q,h as G,g as K,B as S,r as l,i as te,d as I,o as r,f as p,n as D,k as m,c,F as W,t as w,j,w as x,l as o,p as d,C as J,E as Q,G as X,H as z,s as ie,q as ne,I as ae,J as oe,K as re,L as le,M as se,N as de}from"./index-DmYaZOZj.js";const ce={components:{Icon:K,Dropdown:G,DropdownMenu:q,Button:P},props:{item:Object,parentSection:Object,depth:Number,root:Boolean,stat:Object,isOpen:Boolean,isChild:Boolean,hasChildren:Boolean,disableSections:Boolean},data(){return{editing:!1}},computed:{isSection(){return this.disableSections?!1:this.depth===1},title(){return this.item.title||this.item.entry_title||this.item.url},icon(){return S(this.item,"config.icon")||S(this.item,"original.icon")||"entries"},isAlreadySvg(){return this.icon.startsWith("<svg")},isRenamedSection(){return this.isSection&&this.item.text!==S(this.item,"config.display_original")},isHidden(){return S(this.item,"manipulations.action")==="@hide"},isInHiddenSection(){return this.parentSection&&this.parentSection.data.manipulations.action==="@hide"},isPinnedAlias(){return S(this.item,"manipulations.action")==="@alias"&&this.inTopLevelSection},isAlias(){return S(this.item,"manipulations.action")==="@alias"},isMoved(){return S(this.item,"manipulations.action")==="@move"},isModified(){return S(this.item,"manipulations.action")==="@modify"},isCustom(){return S(this.item,"manipulations.action")==="@create"},inTopLevelSection(){return this.parentSection?.data?.text==="Top Level"}},methods:{remove(){const e=this.item._vm.store;e.deleteNode(this.item),this.$emit("removed",e)}}},ue={class:"flex flex-1 items-center p-1.5 text-xs leading-normal"},me=["innerHTML"],he=["textContent"],pe={class:"flex items-center gap-3"};function ge(e,t,a,u,n,i){const g=l("Icon"),y=l("Button"),f=l("ui-icon"),v=l("DropdownMenu"),b=l("Dropdown"),_=te("tooltip");return r(),I("div",{class:D(["page-tree-branch flex",{"ml-[-24px]":i.inTopLevelSection,"page-tree-branch--has-children":a.hasChildren}])},[t[2]||(t[2]=p("div",{class:"page-move w-6"},null,-1)),p("div",ue,[p("div",{class:D(["flex gap-3 grow items-center",{"opacity-50":i.isHidden||i.isInHiddenSection}])},[!i.isSection&&!a.isChild?(r(),I(W,{key:0},[i.isAlreadySvg?(r(),I("i",{key:0,class:"size-4",innerHTML:i.icon},null,8,me)):(r(),c(g,{key:1,class:"size-4",name:i.icon},null,8,["name"]))],64)):m("",!0),p("a",{onClick:t[0]||(t[0]=C=>e.$emit("edit",C)),class:D({"text-sm font-medium is-section":i.isSection}),textContent:w(e.__(a.item.text))},null,10,he),a.hasChildren&&!i.isSection?(r(),c(y,{key:1,class:D(["transition duration-100 [&_svg]:size-4! -mx-1.5",{"-rotate-90 is-closed":!a.isOpen,"is-open":a.isOpen}]),icon:"chevron-down",size:"xs",round:"",variant:"ghost",onClick:t[1]||(t[1]=C=>e.$emit("toggle-open"))},null,8,["class"])):m("",!0)],2),p("div",pe,[j(e.$slots,"branch-icon",{branch:a.item}),i.isRenamedSection?x((r(),c(f,{key:0,class:"size-4 text-gray-400 dark:text-gray-600",name:"fieldsets"},null,512)),[[_,e.__("Renamed Section")]]):i.isHidden?x((r(),c(f,{key:1,class:"size-4 text-gray-400 dark:text-gray-600",name:"eye-closed"},null,512)),[[_,i.isSection?e.__("Hidden Section"):e.__("Hidden Item")]]):i.isPinnedAlias?x((r(),c(f,{key:2,class:"size-4 text-gray-400 dark:text-gray-600",name:"pin"},null,512)),[[_,e.__("Pinned Item")]]):i.isAlias?x((r(),c(f,{key:3,class:"size-4 text-gray-400 dark:text-gray-600",name:"duplicate"},null,512)),[[_,e.__("Aliased Item")]]):i.isMoved?x((r(),c(f,{key:4,class:"size-4 text-gray-400 dark:text-gray-600",name:"moved"},null,512)),[[_,e.__("Moved Item")]]):i.isModified?x((r(),c(f,{key:5,class:"size-4 text-gray-400 dark:text-gray-600",name:"fieldsets"},null,512)),[[_,e.__("Modified Item")]]):i.isCustom?x((r(),c(f,{key:6,class:"size-4 text-gray-400 dark:text-gray-600",name:"user-edit"},null,512)),[[_,i.isSection?e.__("Custom Section"):e.__("Custom Item")]]):m("",!0),o(b,{placement:"left-start"},{default:d(()=>[o(v,null,{default:d(()=>[j(e.$slots,"branch-options",{item:a.item,depth:a.depth,removeBranch:i.remove,inTopLevelSection:i.inTopLevelSection})]),_:3})]),_:3})])])],2)}const fe=T(ce,[["render",ge]]),_e={props:{stat:Object},computed:{hasChildren(){return this.stat.children.filter(e=>e.hidden===!1).length}}},ve={class:"flex first-branch"},ye={key:0,class:"is-top-level-section-placeholder w-full rounded-lg border border-dashed border-blue-400 bg-blue-500/10 p-2"};function Se(e,t,a,u,n,i){return r(),I("div",ve,[i.hasChildren?m("",!0):(r(),I("div",ye,"   "))])}const Ie=T(_e,[["render",Se]]),be={components:{Button:P,Heading:X,Field:Q,Input:J},emits:["closed","updated"],props:{creating:!1,item:null,isChild:!1},data(){return{config:{...this.item?.data?.config||this.createNewItem()},saveKeyBinding:null,validateDisplay:!1,validateUrl:!1}},created(){this.saveKeyBinding=this.$keys.bindGlobal(["enter","mod+enter","mod+s"],e=>{e.preventDefault(),this.save()})},unmounted(){this.saveKeyBinding.destroy()},methods:{createNewItem(){return{display:"",url:"",icon:null}},save(){if(this.validateDisplay=!1,this.validateUrl=!1,this.config.display||(this.validateDisplay=!0),this.config.url||(this.validateUrl=!0),this.validateDisplay||this.validateUrl)return;let e=clone(this.config);this.isChild?e.icon=null:e.icon||(e.icon=S(this.item,"original.icon")),this.$emit("updated",this.config,this.item)}}},Ce={class:"m-2 flex h-full flex-col rounded-xl bg-white dark:bg-gray-800"},ke={class:"flex items-center justify-between rounded-t-xl border-b border-gray-300 bg-gray-50 px-4 py-2 dark:border-gray-950 dark:bg-gray-900"},xe={class:"flex-1 overflow-auto"},De={class:"p-3 flex flex-col space-y-6"};function Ne(e,t,a,u,n,i){const g=l("Heading"),y=l("Button"),f=l("Input"),v=l("Field"),b=l("icon-fieldtype"),_=l("publish-field-meta"),C=l("stack");return r(),c(C,{narrow:"",name:"nav-item-editor",onClosed:t[3]||(t[3]=H=>e.$emit("closed"))},{default:d(({close:H})=>[p("div",Ce,[p("div",ke,[o(g,{size:"lg"},{default:d(()=>[z(w(a.creating?e.__("Add Nav Item"):e.__("Edit Nav Item")),1)]),_:1}),o(y,{icon:"x",variant:"ghost",class:"-me-2",onClick:H},null,8,["onClick"])]),p("div",xe,[p("div",De,[o(v,{id:"display",label:e.__("Display"),required:""},{default:d(()=>[o(f,{id:"display",modelValue:n.config.display,"onUpdate:modelValue":t[0]||(t[0]=k=>n.config.display=k),focus:!0,error:n.validateDisplay?e.__("statamic::validation.required"):null},null,8,["modelValue","error"])]),_:1},8,["label"]),o(v,{id:"url",label:e.__("URL"),required:""},{default:d(()=>[o(f,{id:"url",modelValue:n.config.url,"onUpdate:modelValue":t[1]||(t[1]=k=>n.config.url=k),error:n.validateUrl?e.__("statamic::validation.required"):null},null,8,["modelValue","error"])]),_:1},8,["label"]),a.isChild?m("",!0):(r(),c(v,{key:0,id:"icon",label:e.__("Icon")},{default:d(()=>[o(_,{config:{handle:"icon",type:"icon"},"initial-value":n.config.icon},{default:d(({meta:k,value:B,loading:L,config:M})=>[L?m("",!0):(r(),c(b,{key:0,handle:"icon",config:M,meta:k,value:B,"onUpdate:value":t[2]||(t[2]=O=>n.config.icon=O)},null,8,["config","meta","value"]))]),_:1},8,["initial-value"])]),_:1},8,["label"])),o(y,{variant:"primary",text:e.__("Save"),onClick:i.save},null,8,["text","onClick"])])])])]),_:1})}const Ae=T(be,[["render",Ne]]),we={components:{Button:P,Heading:X,Field:Q,Input:J},emits:["closed","updated"],props:{creating:!1,sectionItem:{}},data(){return{section:this.sectionItem?.data?.text||"",saveKeyBinding:null,validate:!1}},created(){this.saveKeyBinding=this.$keys.bindGlobal(["enter","mod+enter","mod+s"],e=>{e.preventDefault(),this.save()})},unmounted(){this.saveKeyBinding.destroy()},methods:{save(){if(this.validate=!1,!this.section){this.validate=!0;return}this.$emit("updated",this.section,this.sectionItem)}}},Te={class:"m-2 flex h-full flex-col rounded-xl bg-white dark:bg-gray-800"},He={class:"flex items-center justify-between rounded-t-xl border-b border-gray-300 bg-gray-50 px-4 py-2 dark:border-gray-950 dark:bg-gray-900"},Be={class:"flex-1 overflow-auto"},Pe={class:"p-3 flex flex-col space-y-6"};function Le(e,t,a,u,n,i){const g=l("Heading"),y=l("Button"),f=l("Input"),v=l("Field"),b=l("stack");return r(),c(b,{narrow:"",name:"nav-item-editor",onClosed:t[1]||(t[1]=_=>e.$emit("closed"))},{default:d(({close:_})=>[p("div",Te,[p("div",He,[o(g,{size:"lg"},{default:d(()=>[z(w(a.creating?e.__("Add Section"):e.__("Edit Section")),1)]),_:1}),o(y,{icon:"x",variant:"ghost",class:"-me-2",onClick:_},null,8,["onClick"])]),p("div",Be,[p("div",Pe,[o(v,{id:"display",label:e.__("Display"),required:""},{default:d(()=>[o(f,{id:"display",modelValue:n.section,"onUpdate:modelValue":t[0]||(t[0]=C=>n.section=C),focus:!0,error:n.validate?e.__("statamic::validation.required"):null},null,8,["modelValue","error"])]),_:1},8,["label"]),o(y,{variant:"primary",text:e.__("Save"),onClick:i.save},null,8,["text","onClick"])])])])]),_:1})}const Me=T(we,[["render",Le]]),Oe={components:{Header:se,DropdownLabel:le,Button:P,ButtonGroup:re,Dropdown:G,DropdownMenu:q,DropdownItem:oe,DropdownSeparator:ae,Draggable:ee,TreeBranch:fe,ItemEditor:Ae,SectionEditor:Me,TopLevelSectionBranch:Ie,Panel:ne,PanelHeader:ie,Icon:K},props:{title:{type:String,require:!0},nav:{type:Array,required:!0},indexUrl:{type:String},updateUrl:{type:String,require:!0},destroyUrl:{type:String,require:!0},saveAsOptions:{type:Array,default:()=>[]}},data(){return{initialNav:clone(this.nav),loading:!1,treeData:[],originalSectionItems:{},changed:!1,targetStat:null,creatingItem:!1,creatingItemIsChild:!1,editingItem:!1,creatingSection:!1,editingSection:!1,confirmingReset:!1,confirmingRemoval:!1,draggingStat:!1,isDraggingIntoTopLevelSection:!1}},created(){this.$keys.bindGlobal(["mod+s"],e=>{e.preventDefault(),this.save()})},mounted(){this.setInitialNav(this.nav),this.addToCommandPalette()},computed:{isDirty(){return this.changed},hasSaveAsOptions(){return this.saveAsOptions.length},direction(){return this.$config.get("direction","ltr")}},methods:{setInitialNav(e){let t=clone(e);this.setOriginalSectionItems(t),this.treeData=Object.values(t.map(a=>this.normalizeNavConfig(a)))},setOriginalSectionItems(e){e.forEach(t=>this.originalSectionItems[t.display_original]=t.items_original||[])},discardChanges(){this.setInitialNav(this.initialNav),this.changed=!1},normalizeNavConfig(e,t=!0){let a={text:e.display,config:e,original:e.original,manipulations:t?e:e.manipulations||{},isSection:t,open:t},u=e.items||e.children||[];return u&&(a.children=u.map(n=>({text:n.display,children:n.children.map(i=>this.normalizeNavConfig(i,!1)),open:!1,config:n,original:n.original,manipulations:n.manipulations||{},isSection:!1}))),a},eachDroppable(e){return!(this.isSectionNode(A.dragNode)||(this.isDraggingIntoTopLevelSection=this.checkIfDraggingIntoTopLevelSection(),A.dragNode.children.length&&e.level>=2)||e.level>=3)},checkIfDraggingIntoTopLevelSection(){return this.getParentSectionNode(A.closestNode)?.data?.text==="Top Level"},rootDroppable(){return A.closestNode===null?!1:this.isSectionNode(A.dragNode)},isSectionNode(e){return e?.data?.isSection},isParentItemNode(e){return!this.isSectionNode(e)&&!this.isChildItemNode(e)},isChildItemNode(e){return e.parent?!this.isSectionNode(e.parent):!1},isCustomSectionNode(e){return this.isSectionNode(e)&&e.data?.manipulations?.action==="@create"},getParentSectionNode(e){return!this.isSectionNode(e)&&e!==void 0?this.getParentSectionNode(e.parent):e},addItem(e){this.targetStat=e,this.creatingItem=!0,this.creatingItemIsChild=this.isParentItemNode(e)},addItemToTopLevel(){this.addItem(this.$refs.tree.rootChildren[0])},addSection(){this.creatingSection=!0},itemAdded(e){let t=this.normalizeNavConfig(e,!1);t.manipulations={action:"@create",display:e.display,url:e.url,icon:e.icon},this.$refs.tree.add(t,this.targetStat),this.resetItemEditor(),this.changed=!0},sectionAdded(e){let t=this.normalizeNavConfig({action:"@create",display:e,display_original:!1});this.$refs.tree.add(t),this.resetSectionEditor(),this.changed=!0},editItem(e){this.isSectionNode(e)?this.editingSection=e:this.editingItem=e},itemUpdated(e,t){t.data.text=e.display,t.data.config.icon=e.icon,this.updateItemManipulation(t,"display",e.display),this.updateItemManipulation(t,"url",e.url),this.updateItemManipulation(t,"icon",e.icon),this.updateItemAction(t),this.resetItemEditor(),this.changed=!0},sectionUpdated(e,t){t.data.text=e,this.resetSectionEditor(),this.changed=!0},updateItemManipulation(e,t,a){e.data.manipulations.action==="@create"||a!==e.data.original[t]?e.data.manipulations[t]=a:delete e.data.manipulations[t]},updateItemAction(e){if(this.isSectionNode(e))return;let t=this.detectItemAction(e);t?e.data.manipulations.action=t:delete e.data.manipulations.action,this.isChildItemNode(e)&&this.updateItemAction(e.parent)},detectItemAction(e){let t=e.data.manipulations.action;switch(!0){case t==="@create":return"@create";case t==="@alias":return"@alias";case t==="@hide":return"@hide";case this.itemHasMoved(e):return"@move";case this.itemHasBeenModified(e):return"@modify"}return null},itemHasMoved(e){return this.itemIsWithinOriginalParentItem(e)?!1:this.itemHasMovedWithinSection(e)||this.itemHasMovedToAnotherSection(e)},itemIsWithinOriginalParentItem(e){let a=(e.parent.data.original||{children:[]}).children.map(u=>u.id);return this.isChildItemNode(e)&&a.includes(e.data.config.id)},itemHasMovedWithinSection(e){let a=(e.parent.data.original||{children:[]}).children.map(i=>i.id);if(this.isChildItemNode(e)&&!a.includes(e.data.config.id))return!0;let u=this.getParentSectionNode(e).data?.config?.display_original||"Top Level",n=this.originalSectionItems[u];return n===void 0?!1:!this.isChildItemNode(e)&&!n.includes(e.data.config.id)},itemHasMovedToAnotherSection(e){let t=this.getParentSectionNode(e).data.config?.display_original||"Top Level",a=e.data.original.section||e.parent.data.original.section;return t!==a},itemHasBeenModified(e){return this.itemHasModifiedProperties(e)||this.itemHasModifiedChildren(e)},itemHasModifiedProperties(e){const{action:t,reorder:a,children:u,...n}=e.data.manipulations;return Object.keys(n).length>0},itemHasModifiedChildren(e){return e.children.filter(t=>Object.keys(t.data.manipulations).length>0).length>0},expandAll(){F(this.$refs.tree.rootChildren,e=>{this.isSectionNode(e)||(e.open=!0)})},collapseAll(){F(this.$refs.tree.rootChildren,e=>{this.isSectionNode(e)||(e.open=!1)})},resetItemEditor(){this.editingItem=!1,this.creatingItem=!1,this.creatingItemIsChild=!1,this.targetStat=!1},resetSectionEditor(){this.editingSection=!1,this.creatingSection=!1},pinItem(e){this.aliasItem(e,this.$refs.tree.rootChildren[0])},aliasItem(e,t){let a=e.data.manipulations.action,u=this.normalizeNavConfig({...e.data.config},!1);a==="@create"?u.manipulations={...e.data.manipulations}:u.manipulations={action:"@alias"},u.children=[],u.original&&(u.original.children=[]),t=t||e.parent,this.$refs.tree.add(u,t),this.changed=!0},itemIsVisible(e){return e.data?.manipulations?.action!=="@hide"},isHideable(e){let t=e.data.manipulations.action;return this.isSectionNode(e)&&t==="@create"?!1:!["@alias","@create"].includes(t)},removeItem(e,t=!1){if(this.isCustomSectionNode(e)&&e.children.length&&!t)return this.confirmingRemoval=e;this.$refs.tree.remove(e),this.changed=!0,this.confirmingRemoval=!1},hideItem(e){e.data.manipulations.action="@hide",this.updateItemAction(e),this.changed=!0},showItem(e){delete e.data.manipulations.action,this.updateItemAction(e),this.changed=!0},reset(){this.$axios.delete(this.destroyUrl).then(()=>window.location.reload()).catch(()=>this.$toast.error(__("Something went wrong")))},save(){this.changed&&this.saveAs(this.updateUrl)},saveAs(e){let t=this.preparePreferencesSubmission();this.$axios.patch(e,{tree:t}).then(()=>location.reload()).catch(()=>this.$toast.error(__("Something went wrong")))},preparePreferencesSubmission(){let e=[];return this.treeData.forEach(t=>{e.push({display:t.text,display_original:t.config.display_original||t.text,action:t.manipulations.action||!1,items:this.prepareItemsForSubmission(t.children)})}),e},prepareItemsForSubmission(e){let t=[];return e.forEach(a=>{t.push({id:this.prepareItemIdForSubmission(a),manipulations:a.manipulations,children:a.children?this.prepareItemsForSubmission(a.children):[]})}),t},prepareItemIdForSubmission(e){return S(e,"original.id",e.text.toLowerCase().replaceAll(" ","_"))},statHandler(e){return e.open=e.data.open,e},beforeDragStart(e){this.isDraggingIntoTopLevelSection=!1,this.draggingStat=e},afterDrop(){return this.updateItemAction(this.draggingStat),this.draggingStat=!1,!0},addToCommandPalette(){Statamic.$commandPalette.add({category:Statamic.$commandPalette.category.Actions,text:__("Add Nav Item"),icon:"plus",action:()=>this.addItemToTopLevel()}),Statamic.$commandPalette.add({category:Statamic.$commandPalette.category.Actions,text:__("Add Section"),icon:"add-section",action:()=>this.addSection()}),Statamic.$commandPalette.add({category:Statamic.$commandPalette.category.Actions,text:__("Reset Nav Customizations"),icon:"history",action:()=>this.confirmingReset=!0})}}},Ue={key:0,class:"loading card"},ze={class:"page-tree-header font-medium text-sm items-center flex justify-between"},Ee=["textContent"],Re={class:"flex gap-2"},Ve={key:1,class:"page-tree w-full"};function Fe(e,t,a,u,n,i){const g=l("DropdownItem"),y=l("DropdownMenu"),f=l("Dropdown"),v=l("Button"),b=l("ui-command-palette-item"),_=l("DropdownLabel"),C=l("ButtonGroup"),H=l("Header"),k=l("Icon"),B=l("ui-button"),L=l("PanelHeader"),M=l("top-level-section-branch"),O=l("DropdownSeparator"),Y=l("tree-branch"),Z=l("Draggable"),$=l("Panel"),E=l("item-editor"),R=l("section-editor"),V=l("confirmation-modal");return r(),I("div",null,[o(H,{title:a.title,icon:"preferences"},{default:d(()=>[o(f,{placement:"left-start"},{default:d(()=>[o(y,null,{default:d(()=>[o(g,{text:e.__("Reset Nav Customizations"),variant:"destructive",icon:"history",onClick:t[0]||(t[0]=h=>n.confirmingReset=!0)},null,8,["text"])]),_:1})]),_:1}),i.isDirty?(r(),c(b,{key:0,category:e.$commandPalette.category.Actions,text:e.__("Discard changes"),icon:"trash",action:i.discardChanges},{default:d(({text:h,action:s})=>[o(v,{variant:"filled",text:e.__("Discard changes"),onClick:s},null,8,["text","onClick"])]),_:1},8,["category","text","action"])):m("",!0),o(f,{placement:"left-start"},{trigger:d(()=>[o(v,{text:e.__("Add"),"icon-append":"chevron-down"},null,8,["text"])]),default:d(()=>[o(y,null,{default:d(()=>[o(g,{text:e.__("Add Nav Item"),onClick:i.addItemToTopLevel,icon:"plus"},null,8,["text","onClick"]),o(g,{text:e.__("Add Section"),onClick:i.addSection,icon:"add-section"},null,8,["text","onClick"])]),_:1})]),_:1}),o(C,null,{default:d(()=>[o(b,{category:e.$commandPalette.category.Actions,text:e.__("Save"),icon:"save",action:i.save,prioritize:""},{default:d(({text:h,action:s})=>[o(v,{type:"submit",variant:"primary",disabled:!n.changed,text:h,onClick:s},null,8,["disabled","text","onClick"])]),_:1},8,["category","text","action"]),i.hasSaveAsOptions?(r(),c(f,{key:0,align:"end"},{trigger:d(()=>[o(v,{icon:"chevron-down",variant:"primary"})]),default:d(()=>[o(y,null,{default:d(()=>[o(_,null,{default:d(()=>[z(w(e.__("Save to"))+"...",1)]),_:1}),(r(!0),I(W,null,de(a.saveAsOptions,h=>(r(),c(g,{key:h.url,text:h.label,onClick:s=>i.saveAs(h.url)},null,8,["text","onClick"]))),128))]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1},8,["title"]),o($,{class:"nav-builder"},{default:d(()=>[n.loading?(r(),I("div",Ue,[o(k,{name:"loading"})])):m("",!0),o(L,null,{default:d(()=>[p("div",ze,[p("div",{textContent:w(e.__("Navigation"))},null,8,Ee),p("div",Re,[o(B,{size:"sm",icon:"tree-collapse",text:e.__("Collapse"),onClick:i.collapseAll},null,8,["text","onClick"]),o(B,{size:"sm",icon:"tree-expand",text:e.__("Expand"),onClick:i.expandAll},null,8,["text","onClick"])])])]),_:1}),n.loading?m("",!0):(r(),I("div",Ve,[o(Z,{ref:"tree",modelValue:n.treeData,"onUpdate:modelValue":t[1]||(t[1]=h=>n.treeData=h),"node-key":h=>h.data.id,space:1,indent:24,dir:i.direction,"stat-handler":i.statHandler,"keep-placeholder":"","trigger-class":"page-move","each-droppable":i.eachDroppable,"root-droppable":i.rootDroppable,onChange:t[2]||(t[2]=h=>n.changed=!0),onBeforeDragStart:i.beforeDragStart,onAfterDrop:i.afterDrop},{placeholder:d(()=>[p("div",{class:D(["rounded-lg border border-dashed border-blue-400 bg-blue-500/10 p-2",{"mt-6 is-section-placeholder":i.isSectionNode(n.draggingStat),"ml-[-24px]":n.isDraggingIntoTopLevelSection}])},"   ",2)]),default:d(({node:h,stat:s})=>[s.level===1&&s.data?.text==="Top Level"?(r(),c(M,{key:0,stat:s},null,8,["stat"])):(r(),c(Y,{key:1,item:h,"parent-section":i.getParentSectionNode(s),depth:s.level,stat:s,"is-open":s.open,"is-child":i.isChildItemNode(s),"has-children":s.children.length>0,class:D(["mb-px",{"mt-6":i.isSectionNode(s)}]),onEdit:U=>i.editItem(s),onToggleOpen:U=>s.open=!s.open},{"branch-options":d(({inTopLevelSection:U})=>[s.level<3?(r(),c(g,{key:0,text:e.__("Add Item"),onClick:N=>i.addItem(s),icon:"plus"},null,8,["text","onClick"])):m("",!0),o(g,{text:e.__("Edit"),onClick:N=>i.editItem(s),icon:"edit"},null,8,["text","onClick"]),!i.isSectionNode(s)&&!U?(r(),c(g,{key:1,text:e.__("Pin to Top Level"),icon:"pin",onClick:N=>i.pinItem(s)},null,8,["text","onClick"])):m("",!0),i.isSectionNode(s)?m("",!0):(r(),c(g,{key:2,text:e.__("Duplicate"),icon:"duplicate",onClick:N=>i.aliasItem(s)},null,8,["text","onClick"])),o(O),i.itemIsVisible(s)?(r(),c(g,{key:3,text:i.isHideable(s)?e.__("Hide"):e.__("Remove"),icon:i.isHideable(s)?"eye-closed":"trash",variant:"destructive",onClick:N=>i.isHideable(s)?i.hideItem(s):i.removeItem(s)},null,8,["text","icon","onClick"])):(r(),c(g,{key:4,text:e.__("Show"),onClick:N=>i.showItem(s)},null,8,["text","onClick"]))]),_:2},1032,["item","parent-section","depth","stat","is-open","is-child","has-children","class","onEdit","onToggleOpen"]))]),_:1},8,["modelValue","node-key","dir","stat-handler","each-droppable","root-droppable","onBeforeDragStart","onAfterDrop"])]))]),_:1}),n.creatingItem?(r(),c(E,{key:0,creating:!0,"is-child":n.creatingItemIsChild,onClosed:i.resetItemEditor,onUpdated:i.itemAdded},null,8,["is-child","onClosed","onUpdated"])):m("",!0),n.editingItem?(r(),c(E,{key:1,item:n.editingItem,"is-child":i.isChildItemNode(n.editingItem),onClosed:i.resetItemEditor,onUpdated:i.itemUpdated},null,8,["item","is-child","onClosed","onUpdated"])):m("",!0),n.creatingSection?(r(),c(R,{key:2,creating:!0,onClosed:i.resetSectionEditor,onUpdated:i.sectionAdded},null,8,["onClosed","onUpdated"])):m("",!0),n.editingSection?(r(),c(R,{key:3,"section-item":n.editingSection,onClosed:i.resetSectionEditor,onUpdated:i.sectionUpdated},null,8,["section-item","onClosed","onUpdated"])):m("",!0),n.confirmingReset?(r(),c(V,{key:4,title:e.__("Reset"),bodyText:e.__("Are you sure you want to reset nav customizations?"),buttonText:e.__("Reset"),danger:!0,onConfirm:i.reset,onCancel:t[3]||(t[3]=h=>n.confirmingReset=!1)},null,8,["title","bodyText","buttonText","onConfirm"])):m("",!0),n.confirmingRemoval?(r(),c(V,{key:5,title:e.__("Remove"),bodyText:e.__("Are you sure you want to remove this section and all of its children?"),buttonText:e.__("Remove"),danger:!0,onConfirm:t[4]||(t[4]=h=>i.removeItem(n.confirmingRemoval,!0)),onCancel:t[5]||(t[5]=h=>n.confirmingRemoval=!1)},null,8,["title","bodyText","buttonText"])):m("",!0)])}const Ge=T(Oe,[["render",Fe]]);export{Ge as default};
